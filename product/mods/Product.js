/*! 2024-11-04 */
KISSY.add("MUI/datalazyload/2.0.1/src/index",function(a,b,c,d,e){function f(a){var b,c,d,e=[];return function(f,g){return 0===g||g||(g=1),1&g&&!c&&(c=!0,a(function(a){for(b=a;d=e.shift();)try{d&&d.apply(null,[b])}catch(c){setTimeout(function(){throw c},0)}})),b?(f&&f.apply(null,[b]),b):(2&g||f&&e.push(f),b)}}function g(b,c,d){function e(){f&&(f.cancel(),f=0),g=a.now(),b.apply(d||this,arguments),h=a.now()}var f,g=0,h=0,c=c||150;return a.mix(function(){!g||h>=g&&a.now()-h>c||g>h&&a.now()-g>8*c?e():(f&&f.cancel(),f=a.later(e,c,0,null,arguments))},{stop:function(){f&&(f.cancel(),f=0)}})}function h(c,d,e){c.style.display=u,c.className="";var f=b.create("<div>");c.parentNode.insertBefore(f,c);var g=c.value;if(a.isFunction(e)){var h=e({type:"textarea",elem:c,value:g});h&&(g=h)}return b.html(f,g,d),f}function i(a){return a._ks_lazy_width?a._ks_lazy_width:a._ks_lazy_width=b.outerWidth(a)}function j(a){return a._ks_lazy_height?a._ks_lazy_height:a._ks_lazy_height=b.outerHeight(a)}function k(a,c,d){if(!a.offsetWidth)return!1;var e,f=b.offset(a),g=!0,h=f.left,k=f.top,l={left:h,top:k,right:h+i(a),bottom:k+j(a)};return e=m(c,l),e&&d&&(g=m(d,l)),g&&e}function l(b,c){var d=this;if(!(d instanceof l))return new l(b,c);var e=b;a.isPlainObject(e)||(e=c||{},b&&(e.container=b)),l.superclass.constructor.call(d,e),d._callbacks={},d._containerIsNotDocument=9!=d.get("container").nodeType,a.isArray(e.container)&&(d._backCompact=1),d._initLoadEvent(),e.container&&d.addElements(e.container),d._loadFn(),a.ready(function(){d._loadFn()}),d.resume()}function m(a,b){var c={};return c.top=Math.max(a.top,b.top),c.bottom=Math.min(a.bottom,b.bottom),c.left=Math.max(a.left,b.left),c.right=Math.min(a.right,b.right),c.bottom>=c.top&&c.right>=c.left}function n(c,d,e,f){"img-src"===d&&(d="img"),a.isArray(c)||(c=[b.get(c)]);var g=new l(p,{});g.set("imgFlag",e||q+s),g.set("areaFlag",e||r+s),g.set("onStart",f),g.set("force",!0),g.addElements(c,d)}var o=a.Env.host,p=o.document,q="data-ks-lazyload",r="ks-datalazyload",s="-custom",t="default",u="none",v="scroll",w="touchmove",x="resize",y=100,z=0,A=function(b,c,d,e){function f(a){b.src!=a&&(b.src=a),b.removeAttribute(c)}c=c||q;var g=b.getAttribute(c),h={type:"img",elem:b,src:g},i=!a.isFunction(d)||d(h)!==!1;i&&h.src&&(a.isFunction(e)?a.use("./plugin/webp",function(a,b){b.isSupport(function(a){f(a?e(h.src):h.src)})}):f(h.src))};return l.ATTRS={diff:{value:t},placeholder:{value:"//g.alicdn.com/s.gif"},execScript:{value:!0},container:{setter:function(c){return c=c||p,a.isWindow(c)?c=c.document:(c=b.get(c),"body"==b.nodeName(c)&&(c=c.ownerDocument)),c},valueFn:function(){return p}},autoDestroy:{value:!0},onStart:{value:null}},a.extend(l,d,{_initLoadEvent:function(){var b=this,c=b.get("autoDestroy");b.imgHandle=function(){A(this,b.get("imgFlag"),b.get("onStart"),b.get("webpReplacer"))},b.textareaHandle=function(){b.addElements(h(this,b.get("execScript"),b.get("onStart")))},b._loadFn=g(function(){c&&0==b._counter&&a.isEmptyObject(b._callbacks)&&b.destroy(),b._loadItems()},y,b)},refresh:function(){this._loadFn()},_loadItems:function(){var b=this,c=b.get("container");(!b._containerIsNotDocument||c.offsetWidth)&&(b._windowRegion=b._getBoundingRect(c),!b._backCompact&&b._containerIsNotDocument&&(b._containerRegion=b._getBoundingRect(b.get("container"))),a.each(b._callbacks,function(a,c){a&&b._loadItem(c,a)}))},_loadItem:function(a,b){var c=this,b=b||c._callbacks[a];if(!b)return!0;var d=b.el,e=!1,f=b.fn;if(c.get("force")||k(d,c._windowRegion,c._containerRegion))try{e=f.call(d)}catch(g){setTimeout(function(){throw g},0)}return e!==!1&&delete c._callbacks[a],e},addCallback:function(c,d){c=b.get(c);var e=this,f=e._callbacks,g={el:c||document,fn:d||a.noop},h=++z;f[h]=g,e._windowRegion?e._loadItem(h,g):e.refresh()},removeCallback:function(c,d){c=b.get(c);var e=this._callbacks;a.each(e,function(a,b){a.el==c&&(d?a.fn==d:1)&&delete e[b]})},getElements:function(){var b=this,c=[],d=[],e=b._callbacks;return a.each(e,function(a){a.fn==b.imgHandle&&c.push(a.el),a.fn==b.textareaHandle&&d.push(a.el)}),{images:this._images,textareas:this._textareas}},addElements:function(c,d){"string"==typeof c?c=b.query(c):a.isArray(c)||(c=[c]);var e=this;e._counter=e._counter||0,a.each(c,function(c){d&&"img"!==d||a.each(a.filter([c].concat(b.query("img",c)),function(a){return a.getAttribute&&a.getAttribute(e.get("imgFlag")||q)},e),function(a){e.onPlaceHolder=e.onPlaceHolder||f(function(a){var b=new Image,c=e.get("placeholder");b.src=c,b.onload=b.onerror=function(){a(c)}}),a.offsetWidth?e.addCallback(a,e.imgHandle):(e._counter++,a.onload=function(){e._counter--,e.addCallback(a,e.imgHandle)},a.src||e.onPlaceHolder(function(b){a.src||(a.src=b)}))}),d&&"textarea"!==d||a.each(b.query("textarea."+(e.get("areaFlag")||r),c),function(a){e.addCallback(a,e.textareaHandle)})})},removeElements:function(c){"string"==typeof c?c=b.query(c):a.isArray(c)||(c=[c]);var d=this,e=d._callbacks;a.each(e,function(b,d){a.inArray(b.el,c)&&delete e[d]})},_getBoundingRect:function(c){var d,e,f,g;if(c){d=b.outerHeight(c),e=b.outerWidth(c);var h=b.offset(c);f=h.left,g=h.top}else d=b.viewportHeight(),e=b.viewportWidth(),f=b.scrollLeft(),g=b.scrollTop();var i=this.get("diff"),j=i===t?e:i,k=0,l=j,m=i===t?d:i,n=0,o=m,p=f+e,q=g+d;return a.isObject(i)&&(k=i.left||0,l=i.right||0,n=i.top||0,o=i.bottom||0),f-=k,p+=l,g-=n,q+=o,{left:f,top:g,right:p,bottom:q}},pause:function(){var a=this,b=a._loadFn;if(!a._destroyed&&(c.remove(o,v,b),c.remove(o,w,b),c.remove(o,x,b),b.stop(),a._containerIsNotDocument)){var d=a.get("container");c.remove(d,v,b),c.remove(d,w,b)}},resume:function(){var a=this,b=a._loadFn;if(!a._destroyed&&(c.on(o,v,b),c.on(o,w,b),c.on(o,x,b),a._containerIsNotDocument)){var d=a.get("container");c.on(d,v,b),c.on(d,w,b)}},destroy:function(){var b=this;b.pause(),b._callbacks={},a.log("datalazyload is destroyed!"),b.fire("destroy"),b._destroyed=1}}),l.loadCustomLazyData=n,a.DataLazyload=l,l},{requires:["dom","event","base"]}),KISSY.add("MUI/datalazyload/index",function(a,b){return b},{requires:["./2.0.1/src/index"]}),KISSY.add("MUI/slider/2.0.2/src/slide-util",function(a){"use strict";a.mix(a,{setHash:function(a,b){var c,d;"object"==typeof a?(c=window.location.href,b=a):c=a,c.indexOf("#")<0&&(c+="#");var e=this.getHash(c);for(d in b)e[d]=b[d];c=c.split("#")[0]+"#";for(d in e)c+=d+"="+e[d]+"&";return c=c.substr(0,c.length-1)},getHash:function(b){var c=b||window.location.href;if(c.indexOf("#")<0)return{};var d=c.split("#")[1];if(""===d)return{};"&"==d[d.length-1]&&(d=d.substr(0,d.length-1)),d=d.replace(/"/gi,"'"),d=d.replace(/=/gi,'":"'),d=d.replace(/&/gi,'","'),d+='"',d='{"'+d+"}";var e=a.JSON.parse(d);return e},_globalEval:function(a){if(a&&/\S/.test(a)){var b=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],c=document.createElement("script");c.text=a,b.insertBefore(c,b.firstChild),setTimeout(function(){b.removeChild(c)},1)}},execScript:function(b){var c,d,e,f,g,h,i=this,j=new RegExp(/<script([^>]*)>([^<]*(?:(?!<\/script>)<[^<]*)*)<\/script>/gi),k=a.one("head")[0],l=/\ssrc=(['"])(.*?)\1/i,m=/\scharset=(['"])(.*?)\1/i;for(j.lastIndex=0;c=j.exec(b);)d=c[1],e=d?d.match(l):!1,e&&e[2]?(g=document.createElement("script"),g.src=e[2],(f=d.match(m))&&f[2]&&(g.charset=f[2]),g.async=!0,k.appendChild(g)):(h=c[2])&&h.length>0&&i._globalEval(h)},isDaily:function(){return/daily\.taobao\.net/.test(window.location.hostname)?!0:!1},getHiddenProp:function(){if("hidden"in document)return"hidden";for(var a=["webkit","moz","ms","o"],b=0;b<a.length;b++)if(a[b]+"Hidden"in document)return a[b]+"Hidden";return null},isHidden:function(){var a=this.getHiddenProp();return a?document[a]:!1}})},{requires:["node","json","event"]}),KISSY.add("MUI/slider/2.0.2/src/kissy2yui",function(a){"use strict";var b=a.config("mini")?a.Node.node:a.Node;a.augment(b,{_delegate:function(){var b=this;return a.isFunction(arguments[1])?b.delegate(arguments[0],arguments[2],arguments[1]):b.delegate.apply(b,arguments),b},indexOf:function(b){var c=this;if(a.isUndefined(b))return null;b[0]&&(b=b[0]);var d=0;return c.each(function(a,c){a[0]===b&&(d=c)}),d},size:function(){return this.length},set:function(a,b){return"innerHTML"===a?this.html(b):this.attr(a,b),this},get:function(a){var b=this,c={innerHTML:function(){return b.html()},region:function(){return{height:b.height(),width:b.width()}}};return a in c?c[a]():void 0},appendChild:function(){return this.append.apply(this,arguments),this},setStyle:function(a,b){return this.css.apply(this,arguments),this},setStyles:function(a){return this.css.apply(this,arguments),this},cloneNode:function(){return this.clone.apply(this,arguments)}}),a.Node.create=function(b){return a.Node(b)}},{requires:["node","event"]}),KISSY.add("MUI/slider/2.0.2/src/base",function(a){"use strict";var b=(a.Node.all,function(){if(!(this instanceof b))throw new Error('please use "new Slide()"');this.init.apply(this,arguments)});return b.plug=function(a){},a.augment(b,a.Event.Target,{init:function(b,c){var d=this;if(a.isObject(b))d.con=b;else if(/^#/i.test(b))d.con=a.one(b);else if(a.one("#"+b))d.con=a.one("#"+b);else{if(!a.one(b))throw new Error("Slide Container Hooker not found");d.con=a.one(b)}if(d.buildParam(c),d.buildHTML(),d.bindEvent(),d.fire("ready",{index:0,navnode:d.tabs.item(0),pannelnode:d.pannels.item(0)}),d.reverse){var e;e=d.previous,d.previous=d.next,d.next=e}if(d.carousel)for(var f=0;f<d.colspan;f++)d.fix_for_transition_when_carousel(2*f);return d.fixSlideSize(),d.layerSlide&&d.initLayer(),d.stoped=null,d.renderPannelTextarea(d.currentTab),this},setWrapperSize:function(b){var c=this;a.isUndefined(b)&&(b=0),c.pannels=c.con.all("."+c.contentClass+" ."+c.pannelClass),c.length=c.pannels.length;var d={none:function(){},vSlide:function(){var a=c.animcon.get("region");c.animwrap.setStyles({height:(c.length+b)*a.height/c.colspan+"px"})},hSlide:function(){var a=c.animcon.get("region");c.animwrap.setStyles({width:(c.length+b)*a.width/c.colspan+"px"})},fade:function(){}};return d[c.effect](),a.isUndefined(b)||c.relocateCurrentTab(),this},add:function(b,c){var d=this;return(a.isUndefined(c)||c>d.length)&&(c=d.length),a.isString(b)&&(b=a.one(b)),d.transitions&&b.css({visibility:"hidden"}),c==d.length?(setTimeout(function(){d.setWrapperSize(1)},0),b.insertAfter(d.pannels[c-1])):b.insertBefore(d.pannels[c]),d.setWrapperSize(),d.fixSlideSize(d.currentTab),d.transitions&&b.css({visibility:""}),d.transitions,this},remove:function(b){var c=this;if(1!==c.length)return b<=c.currentTab&&(c.currentTab--,c.length--),c.transitions&&c.con.css({display:"none"}),a.one(c.pannels[b]).remove(),c.setWrapperSize(),c.transitions&&c.con.css({display:"block"}),c.fixSlideSize(c.currentTab),this},removeLast:function(){var a=this;return a.remove(a.length-1),a},renderLazyData:function(b){if(b.setStyle("display","none"),"1"!=b.attr("lazy-data")){if(b.attr("lazy-data","1"),a.isUndefined(d)){String(a.now())}else{a.stamp(d)}var c=b.get("innerHTML").replace(/&lt;/gi,"<").replace(/&gt;/gi,">"),d=a.Node.create("<div>"+c+"</div>");a.one(d).insertBefore(b),a.execScript(c)}},renderPannelTextarea:function(b){var c=this;if(c.pannels.item(b))for(var d=function(b){var d=(a.one(c.pannels.item(b)),c.pannels.item(b).all(".data-lazyload"));d&&d.each(function(a,b){c.renderLazyData(a)})},e=0;e<c.colspan;e++)d(b+e)},buildWrap:function(){var b=this;return b.animwrap=a.Node.create('<div style="position:relative;"></div>'),b.animcon.children().appendTo(b.animwrap),b.animcon.empty().appendChild(b.animwrap),b.pannels=b.con.all("."+b.contentClass+" ."+b.pannelClass),b},doEffectInit:function(){var a=this,b={none:function(){a.pannels=a.con.all("."+a.contentClass+" ."+a.pannelClass),a.pannels.setStyles({display:"none"}),a.pannels.item(a.defaultTab).setStyles({display:"block"})},vSlide:function(){a.buildWrap();var b=a.animcon.get("region");a.pannels.setStyles({"float":"none",overflow:"hidden"}),a.animwrap.setStyles({height:a.length*b.height/a.colspan+"px",overflow:"hidden",top:-1*a.defaultTab*b.height+"px"})},hSlide:function(){a.buildWrap();var b=a.animcon.get("region");a.pannels.setStyles({"float":"left",overflow:"hidden"}),a.transitions?a.animwrap.setStyles({overflow:"hidden",width:a.length*b.width/a.colspan+"px","-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+-1*a.defaultTab*b.width+"px,0,0)"}):a.animwrap.setStyles({width:a.length*b.width/a.colspan+"px",overflow:"hidden",left:-1*a.defaultTab*b.width+"px"})},fade:function(){a.pannels=a.con.all("."+a.contentClass+" ."+a.pannelClass),a.pannels.setStyles({position:"absolute",zIndex:0}),a.pannels.each(function(b,c){c==a.defaultTab?b.setStyles({opacity:1,display:"block"}):b.setStyles({opacity:0,display:"none"})})}};return b[a.effect](),this},buildHTML:function(){var b=this,c=b.con;b.tabs=c.all("."+b.navClass+" "+b.triggerSelector);var d=c.all("."+b.contentClass+" ."+b.pannelClass);if(b.length=d.size(),c.one("."+b.navClass)||a.Node('<ul class="'+b.navClass+'" style="display:none"></ul>').appendTo(b.con),0===b.tabs.size()){for(var e=c.all("."+b.navClass),f="",g=0;g<b.length;g++){var h="";0===g&&(h=b.selectedClass),f+='<li class="'+h+'"><a href="javascript:void(0);">'+(g+1)+"</a></li>"}e.set("innerHTML",f)}return b.tabs=c.all("."+b.navClass+" "+b.triggerSelector),b.animcon=c.one("."+b.contentClass),b.animwrap=null,b.doEffectInit(),b.carousel?(b.fixSlideSize(b.currentTab-b.colspan),b.hightlightNav(b.currentTab-b.colspan)):(b.fixSlideSize(b.currentTab),b.hightlightNav(b.getWrappedIndex(b.currentTab))),b.autoSlide===!0&&(b.invisibleStop&&b.isSlideVisible()||!b.invisibleStop)&&b.play(),this},getCurrentPannel:function(){var b=this;return a.one(b.pannels[b.currentTab])},renderWidth:function(){var a=this,b=a.animcon.get("region").width;return"hSlide"==a.effect&&(b/=a.colspan),a.pannels.setStyles({width:b+"px"}),this},renderHeight:function(){var a=this,b=a.animcon.get("region").height;return"vSlide"==a.effect&&(b/=a.colspan),a.pannels.setStyles({height:b+"px"}),this},relocateCurrentTab:function(b){var c=this;return a.isUndefined(b)&&(b=c.currentTab),"hSlide"==c.effect?(c.transitions?c.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+-1*b*c.animcon.get("region").width/c.colspan+"px,0,0)","-webkit-backface-visibility":"hidden"}):c.animwrap.setStyles({left:-1*b*c.animcon.get("region").width/c.colspan}),c.currentTab=b,this):void 0},fixSlideSize:function(a){var b=this;return b.adaptive_fixed_width&&b.renderWidth(),b.adaptive_fixed_height&&b.renderHeight(),b.adaptive_fixed_size&&b.renderHeight().renderWidth(),b.resetSlideSize(a),this},removeHeightTimmer:function(){var b=this;a.isNull(b.heightTimmer)||(clearInterval(b.heightTimmer),b.heightTimmer=null)},addHeightTimmer:function(){var b=this;a.isNull(b.heightTimmer)||(clearInterval(b.heightTimmer),b.heightTimmer=null);var c=function(){"hSlide"==b.effect&&b.animcon.setStyles({height:b.pannels.item(b.currentTab).get("region").height+"px"})};b.heightTimmer=setInterval(c,100),c()},resetSlideSize:function(a){var b,c,d=this;return("undefined"==typeof a||null===a)&&(a=d.currentTab),"hSlide"==d.effect||"vSlide"==d.effect?("hSlide"==d.effect&&(b=d.adaptive_width?d.adaptive_width():d.animcon.get("region").width,c=d.pannels.item(a).get("region").height,d.animwrap.setStyles({width:d.pannels.size()*b+"px"}),b/=d.colspan,d.pannels.setStyles({width:b+"px",display:"block"}),d.animcon.setStyles({width:b*d.colspan+"px",overflow:"hidden"}),d.animWrapperAutoHeightSetting&&d.animcon.setStyles({height:c+"px"})),"vSlide"==d.effect&&(b=d.pannels.item(a).get("region").width,c=d.adaptive_height?d.adaptive_height():d.animcon.get("region").height,d.animwrap.setStyles({height:d.pannels.size()*c+"px"}),c/=d.colspan,d.pannels.setStyles({height:c*d.colspan+"px",display:"block"}),d.animcon.setStyles({height:c*d.colspan+"px",overflow:"hidden"}),d.animWrapperAutoHeightSetting&&d.animcon.setStyles({width:b+"px"})),this):void 0},getWrappedIndex:function(a){var b=this,c=0;return c=b.carousel?a<b.colspan?b.length-3*b.colspan+a:a>=b.length-b.colspan?a-(b.length-b.colspan):a-b.colspan:a},getMousePosition:function(){var b=this,c=function(a){b._t_mouseX=a.clientX,b._t_mouseY=a.clientY};a.one(document).on("mousemove",c),setTimeout(function(){a.one(window).detach("mouseover",c)},b.triggerDelay)},massTrigger:function(b,c){var d=this;return a.inArray(d.eventType,["mouseover","mouseenter"])?(d.getMousePosition(),void(a.isUndefined(d._fired)||a.isNull(d._fired)?d._fired=setTimeout(function(){d.inRegion([d._t_mouseX+a.one(window).scrollLeft(),d._t_mouseY+a.one(window).scrollTop()],a.one(c))&&b(a.one(c)),d._fired=null},d.triggerDelay):(clearTimeout(d._fired),d._fired=setTimeout(function(){d.inRegion([d._t_mouseX+a.one(window).scrollLeft(),d._t_mouseY+a.one(window).scrollTop()],a.one(c))&&b(a.one(c)),d._fired=null},d.triggerDelay)))):void b(a.one(c))},getMaxAnimDelay:function(b){var c=this,d=0;if(c.sublayers)return a.each(c.sublayers[b],function(a){a.durationout+a.delayout>d&&(d=a.durationout+a.delayout)}),d},inRegion:function(a,b){var c=b.offset(),d={width:b.width(),height:b.height()};return a[0]>=c.left&&a[0]<=c.left+d.width&&a[1]>=c.top&&a[1]<=c.top+d.height?!0:!1},bindEvent:function(){var b=this;if(a.inArray(b.eventType,["click","mouseover","mouseenter"])&&b.con._delegate(b.eventType,function(a){a.preventDefault(),b.massTrigger(function(a){var c=Number(b.tabs.indexOf(a));b.carousel&&(c=(c+1)%b.length),b.go(c),b.autoSlide&&b.stoped===!1&&b.stop().play()},a.currentTarget)},"."+b.navClass+" "+b.triggerSelector),b.hoverStop&&(b.con._delegate("mouseover",function(a){if(b.isMouseover=!0,b.autoSlide){var c=b.stoped;b.stop(),b.stoped=c}},"."+b.contentClass+" ."+b.pannelClass),b.con._delegate("mouseout",function(a){b.isMouseover=!1,b.autoSlide&&b.stoped===!1&&b.play()},"."+b.contentClass+" ."+b.pannelClass)),a.one(window).on("resize",function(a){b.fixSlideSize(b.currentTab),b.relocateCurrentTab()}),b.on("beforeSwitch",function(a){return"function"==typeof b.before_switch?(b._executeSwitch=b.before_switch(),b._executeSwitch):"boolean"==typeof b.before_switch?(b._executeSwitch=b.before_switch,b.before_switch):(b._executeSwitch=!0,!0)}),!b.touchmove)return this;if(b.con._delegate("touchstart",function(a){b.stop(),b.touching=!0,b.is_last()&&b.carousel&&b.fix_next_carousel(),b.is_first()&&b.carousel&&b.fix_pre_carousel(),b.startX=a.changedTouches[0].clientX,b.startY=a.changedTouches[0].clientY,b.animwrap.setStyles({"-webkit-transition-duration":"0s"}),b.startT=Number(new Date)},"."+b.contentClass),b.con._delegate("touchend",function(a){b.touching=!1;var c=a.changedTouches[0].clientX,d=Number(b.animcon.get("region").width);b.deltaX=Math.abs(c-b.startX);var e=Math.abs(c)<Math.abs(b.startX),f=!e,g=b.carousel?!1:b.is_last()&&e||b.is_first()&&f,h=function(){b.animwrap.setStyles({"-webkit-transition-duration":Number(b.speed)/2+"s","-webkit-transform":"translate3d("+-1*b.currentTab*b.animcon.get("region").width/b.colspan+"px,0,0)"})},i=function(){var a=b.animcon.get("region").width/b.colspan,c=parseInt((b.deltaX-a/2)/a,10);e?(c>=1&&b.length>2&&(b.currentTab+=c+1,b.currentTab>=b.length-b.colspan&&(b.currentTab=b.length-b.colspan-1)),b.next()):(c>=1&&b.length>2&&(b.currentTab+=-1*c-1,b.currentTab<=0&&(b.currentTab=1)),b.previous())};return b.touchmove&&b.deltaX<30?void h():(!g&&(b.touchmove&&b.deltaX>d/3||!b.touchmove&&b.carousel||!b.carousel&&b.touchmove&&"hSlide"==b.effect||!b.touchmove&&!b.carousel||Number(new Date)-b.startT<550)?i():h(),void(b.autoSlide&&b.stoped===!1&&b.play()))},"."+b.contentClass),b.touchmove&&(b.con._delegate("touchmove",function(a){if(!(a.touches.length>1)){b.deltaX=a.touches[0].clientX-b.startX;var c=b.is_last()&&b.deltaX<0||b.is_first()&&b.deltaX>0;if(!b.carousel&&"hSlide"==b.effect&&c&&(b.deltaX=b.deltaX/3),b.isScrolling=Math.abs(b.deltaX)<Math.abs(a.touches[0].clientY-b.startY)?!0:!1,!b.isScrolling){a.preventDefault(),b.stop();var d=Number(b.animcon.get("region").width/b.colspan),e=b.deltaX-b.currentTab*d;b.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+e+"px,0,0)"})}}},"."+b.contentClass),b.animwrap&&b.animwrap.on("webkitTransitionEnd",function(){})),b.invisibleStop){var c=a.getHiddenProp();if(c){var d,e=c.replace(/[H|h]idden/,"")+"visibilitychange";a.one(document).on(e,function(c){a.isHidden()?b.timer?(d=!0,b.stop()):d=!1:b.isSlideVisible()&&d&&b.play()})}a.one(window).on("scroll resize",function(a){b.isSlideVisible()?b.timer||b.hoverStop&&(!b.hoverStop||b.isMouseover)||b.play():b.timer&&b.stop()})}return this},isSlideVisible:function(){var b=this,c=b.animcon.offset().left,d=b.animcon.offset().top,e=b.animcon.width(),f=b.animcon.height(),g=a.one(window).scrollTop(),h=a.one(window).scrollLeft();return g>d+f||g+a.one(window).height()<d||h>c+e||h+a.one(window).width()<c?!1:!0},initLayer:function(){var b=this;if(!("ontouchstart"in document.documentElement||a.UA.ie>0&&a.UA.ie<9)){var c=["durationin","easingin","durationout","easingout","delayin","delayout","slideindirection","slideoutdirection","offsetin","offsetout","alpha","easeInStrong","easeOutStrong","easeBothStrong","easeNone","easeIn","easeOut","easeBoth","elasticIn","elasticOut","elasticBoth","backIn","backOut","backBoth","bounceIn","bounceOut","bounceBoth","left","top","right","bottom"],d={durationin:1e3,easingin:"easeIn",durationout:1e3,easingout:"easeOut",delayin:300,delayout:300,slideindirection:"right",slideoutdirection:"left",alpha:!0,offsetin:50,offsetout:50},e=function(b){function e(a,b){var c=h[b];f[b]=void 0===c||null===c?a:c}var f=this,g=b.attr("rel").replace(/"'/gi,"").replace(new RegExp("("+c.join("|")+")","ig"),'"$1"'),h=a.JSON.parse("{"+g+"}");a.each(d,e),this.el=b,this.left=Number(b.css("left").replace("px","")),this.top=Number(b.css("top").replace("px","")),this.animIn=function(){var b=this,c=b.offsetin,d=b.slideindirection,e={left:function(){b.el.css({left:b.left-c})},top:function(){b.el.css({top:b.top-c})},right:function(){b.el.css({left:b.left+c})},bottom:function(){b.el.css({top:b.top+c})}};e[d](),setTimeout(function(){var c={left:{left:b.left},top:{top:b.top},bottom:{top:b.top},right:{left:b.left}},e={};a.mix(e,c[d]),b.alpha&&a.mix(e,{opacity:1}),a.one(b.el).animate(e,b.durationout/1e3,b.easingin,function(){})},b.delayin),b.alpha&&b.el.css({opacity:0})},this.animOut=function(){var b=this,c=b.offsetout,d=b.slideoutdirection,e={left:function(){b.el.css({left:b.left})},top:function(){b.el.css({top:b.top})},right:function(){b.el.css({left:b.left})},bottom:function(){b.el.css({top:b.top})}};e[d](),setTimeout(function(){var e={left:{left:b.left+c},top:{top:b.top+c},bottom:{top:b.top-c},right:{left:b.left-c}},f={};a.mix(f,e[d]),b.alpha&&a.mix(f,{opacity:0}),a.one(b.el).animate(f,b.durationout/1e3,b.easingout,function(){})},b.delayout),b.alpha&&b.el.css({opacity:1})}};b.sublayers=[],b.pannels.each(function(a,c){return("vSlide"==b.effect||"hSlide"==b.effect)&&a.css({position:"relative"}),0===a.all('[alt="sublayer"]').length?void(b.sublayers[c]=[]):(void 0===b.sublayers[c]&&(b.sublayers[c]=[]),void a.all('[alt="sublayer"]').each(function(a,d){b.sublayers[c].push(new e(a))}))}),b.on("beforeSwitch",function(a){}),b.on("beforeTailSwitch",function(a){return b.subLayerRunout(a.index),b.getMaxAnimDelay(a.index)})}},subLayerRunin:function(b){var c=this,d=c.sublayers[b];a.each(d,function(a,b){a.animIn()})},subLayerRunout:function(b){var c=this,d=c.sublayers[b];a.each(d,function(a,b){a.animOut()})},buildParam:function(b){function c(a,c){var e=b[c];d[c]=void 0===e||null===e?a:e}var d=this;return(void 0===b||null===b)&&(b={}),a.each({autoSlide:!1,speed:300,timeout:3e3,effect:"none",eventType:"click",easing:"easeBoth",hoverStop:!0,invisibleStop:!1,selectedClass:"selected",conClass:"t-slide",navClass:"tab-nav",triggerSelector:"li",contentClass:"tab-content",pannelClass:"tab-pannel",before_switch:!0,carousel:!1,reverse:!1,touchmove:!0,adaptive_fixed_width:!1,adaptive_fixed_height:!1,adaptive_fixed_size:!1,adaptive_width:!1,adaptive_height:!1,defaultTab:0,layerSlide:!1,layerClass:"tab-animlayer",colspan:1,animWrapperAutoHeightSetting:!0,webkitOptimize:!0,triggerDelay:300,autoActived:!0},c),a.mix(d,{tabs:[],animcon:null,pannels:[],timmer:null,touching:!1}),d.speed=d.speed/1e3,0!==d.defaultTab&&(d.defaultTab=Number(d.defaultTab)-1),d.carousel&&(d.defaultTab=0,d.defaultTab=d.colspan+d.defaultTab,d.effect="hSlide"),d.currentTab=d.defaultTab,d.transitions="webkitTransition"in document.body.style&&d.webkitOptimize,d},fix_for_transition_when_carousel:function(a){var b=this;"undefined"==typeof a&&(a=0);var c=b.con;if(b.animcon=b.con.one("."+b.contentClass),b.animwrap=b.animcon.one("div"),b.pannels=c.all("."+b.contentClass+" ."+b.pannelClass),"hSlide"==b.effect){var d=Number(b.animcon.get("region").width/b.colspan);Number(b.animcon.get("region").height);b.animwrap.setStyle("width",b.pannels.size()*d+2*d);var e=b.pannels.item(a).cloneNode(!0),f=b.pannels.item(b.pannels.size()-1-a).cloneNode(!0);if(b.animwrap.append(e),b.animwrap.prepend(f),0===b.defaultTab)var g=-1*d*(a/2+1+b.defaultTab-1);else var g=-1*d*(a/2+1);b.transitions?b.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+g+"px,0,0)","-webkit-backface-visibility":"hidden",left:"0"}):b.animwrap.setStyle("left",g)}return b.pannels=c.all("."+b.contentClass+" ."+b.pannelClass),b.length=b.pannels.size(),this},isAming:function(){return!1},previous:function(a){var b=this,c=b.currentTab+b.length-1-(b.colspan-1);return c>=b.length-b.colspan+1&&(c%=b.length-b.colspan+1),b.carousel&&b.is_first()?(b.fix_pre_carousel(),b.previous.call(b),this):(b.go(c,a),this)},is_last:function(){var a=this;return a.currentTab==a.length-(a.colspan-1)-1?!0:!1},is_first:function(){var a=this;return 0===a.currentTab?!0:!1},next:function(a){var b=this,c=b.currentTab+1;return c>=b.length-b.colspan+1&&(c%=b.length-b.colspan+1),b.carousel&&b.is_last()?(b.fix_next_carousel(),b.next.call(b),this):(b.go(c,a),this)},fix_next_carousel:function(){var a=this;a.currentTab=a.colspan;var b=a.con;"none"!=a.effect&&(a.pannels=b.all("."+a.contentClass+" ."+a.pannelClass));var c="-"+Number(a.animcon.get("region").width).toString()+"px";"hSlide"==a.effect?a.transitions?a.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+c+",0,0)"}):a.animwrap.setStyle("left",c):"vSlide"==a.effect},fix_pre_carousel:function(){var a=this;a.currentTab=a.length-1-2*a.colspan+1;var b=a.con;"none"!=a.effect&&(a.pannels=b.all("."+a.contentClass+" ."+a.pannelClass));var c="-"+(Number(a.animcon.get("region").width/a.colspan)*a.currentTab).toString()+"px";"hSlide"==a.effect?a.transitions?a.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+c+",0,0)"}):a.animwrap.setStyle("left",c):"vSlide"==a.effect},hightlightNav:function(a){var b=this;return b.carousel&&b.colspan>1?this:(b.tabs.item(a)&&(b.tabs.removeClass(b.selectedClass),b.tabs.item(a).addClass(b.selectedClass)),this)},unhighlightNav:function(a){var b=this;return b.carousel&&b.colspan>1?this:(b.tabs.item(a)&&b.tabs.removeClass(b.selectedClass),this)},unhighlightNavAll:function(){var a=this;return a.tabs.removeClass(a.selectedClass),this},switch_to:function(b,c){var d=this;if(c===!1)var e=!1;else var e=!0;var f=function(){a.isFunction(c)&&c.call(d,d),d.fire("afterSwitch",{index:d.currentTab,navnode:d.tabs.item(d.getWrappedIndex(d.currentTab)),pannelnode:d.pannels.item(d.currentTab)})},g=d.fire("beforeTailSwitch",{index:d.currentTab,navnode:d.tabs.item(d.getWrappedIndex(d.currentTab)),pannelnode:d.pannels.item(d.currentTab)});if(d.fixSlideSize(b),d.autoSlide&&d.stoped===!1&&d.stop().play(),b>=d.length&&(b%=d.length),b==d.currentTab)return this;if(d.anim)try{d.anim.stop(),d.anim=null}catch(h){}var i={none:function(a){d.pannels.setStyles({display:"none"}),d.pannels.item(a).setStyles({display:"block"}),f()},vSlide:function(b){d.transitions?(d.animwrap.setStyles({"-webkit-transition-duration":(e?d.speed:"0")+"s","-webkit-transform":"translate3d(0,"+-1*b*d.animcon.get("region").height/d.colspan+"px,0)","-webkit-backface-visibility":"hidden"}),e?(d.anim=a.one(d.animwrap).animate({"-webkit-transition-duration":d.speed+"s","-webkit-transform":"translate3d(0,"+-1*b*d.animcon.get("region").height/d.colspan+"px,0)","-webkit-backface-visibility":"hidden",opacity:1},a.config("mini")?d.speed:.001,d.easing,function(){}),setTimeout(function(){f()},1e3*d.speed)):f()):e?d.anim=a.one(d.animwrap).animate({top:-1*b*d.animcon.get("region").height/d.colspan},d.speed,d.easing,function(){f()}):(d.animwrap.css({top:-1*b*d.animcon.get("region").height/d.colspan}),f())},hSlide:function(b){d.transitions?e?(d.anim=a.one(d.animwrap).animate({"-webkit-transition-duration":d.speed+"s","-webkit-transform":"translate3d("+-1*b*d.animcon.get("region").width/d.colspan+"px,0,0)","-webkit-backface-visibility":"hidden",opacity:1},a.config("mini")?d.speed:.001,d.easing,function(){}),setTimeout(function(){f()},1e3*d.speed)):f():e?d.anim=a.one(d.animwrap).animate({left:-1*b*d.animcon.get("region").width/d.colspan},d.speed,d.easing,function(){f()}):(d.animwrap.css({left:-1*b*d.animcon.get("region").width/d.colspan}),f())},fade:function(b){var c=d.currentTab;d.pannels.item(b).setStyle({display:"block"}),d.pannels.item(b).setStyle("opacity",0),d.pannels.item(c).setStyle("zIndex",1),d.pannels.item(b).setStyle("zIndex",2),d.anim=a.one(d.pannels.item(b)).animate({opacity:1},d.speed,d.easing,function(){d.pannels.item(c).setStyle("zIndex",0),d.pannels.item(b).setStyle("zIndex",1),d.pannels.item(c).setStyle("opacity",0),d.pannels.item(c).setStyles({display:"none"}),f(),d.fire("afterSwitch",{index:b,navnode:d.tabs.item(d.getWrappedIndex(b)),pannelnode:d.pannels.item(b)})})}},j=function(){var a=d.fire("beforeSwitch",{index:b,navnode:d.tabs.item(b),pannelnode:d.pannels.item(b)});a._executeSwitch!==!1&&(b+d.colspan>d.pannels.size()&&(b=d.pannels.size()-d.colspan),i[d.effect](b),d.currentTab=b,d.hightlightNav(d.getWrappedIndex(b)),d.fire("switch",{index:b,navnode:d.tabs.item(d.getWrappedIndex(b)),pannelnode:d.pannels.item(b)}),d.renderPannelTextarea(b))};a.isNumber(g)?setTimeout(function(){j()},g):j()},go:function(a,b){var c=this;return c.switch_to(a,b),this},play:function(){var a=this;return null!==a.timer&&clearTimeout(a.timer),a.timer=setTimeout(function(){a.next().play()},Number(a.timeout)),a.stoped=!1,this},stop:function(){var a=this;return clearTimeout(a.timer),a.timer=null,a.stoped=!0,this}}),b},{requires:["node","json","event","anim","ua","./slide-util","./kissy2yui"]}),KISSY.add("MUI/slider/index",function(a,b){return b},{requires:["./2.0.2/src/base"]}),KISSY.add("UFO/EventSupport",function(a){function b(a,b){for(var c=0,d=b.length;d>c;c++){for(var e=b[c],f=0,g=0;f<a.length;f++)a[f]!=e&&(a[g++]=a[f]);a.length=g}}function c(a){this.listeners=this.listeners||{},this.oneTimeListeners=this.oneTimeListeners||{}}return UFO.augment(c,{on:function(b,c){var d=this.listeners[b]||[];return(d=a.isArray(d)?d:[d]).push(c),this.listeners[b]=d,this},off:function(a,c){return this.listeners[a]&&b(this.listeners[a],c),this.oneTimeListeners[a]&&b(this.oneTimeListeners[a],c),this},one:function(a,b){return this.oneTimeListeners[a]=this.oneTimeListeners[a]||[],this.oneTimeListeners[a].push(b),this},fire:function(){var b=[],c=arguments[0],d=Array.prototype.slice.call(arguments,1),e=this.listeners[c],f=this.oneTimeListeners[c];if(e)for(var g=0,h=(e=a.isArray(e)?e:[e]).length;h>g;g++)b.push(e[g].apply(this,d));if(f)for(g=0,h=(f=a.isArray(f)?f:[f]).length;h>g;g++)b.push(f[g].apply(this,d));return f=[],1==b.length?b[0]:b},fireEvent:function(){return this.fire.apply(this,arguments)},hasListener:function(a){return this.listeners[a]},relayEvents:function(a,b,c){for(var d,e=b.length,f=0;e>f;f++)d=b[f],a.on(d,this.createRelayer(c?c+d:d))},createRelayer:function(a,b){var c=this;return function(){return c.fireEvent.apply(c,[a].concat(Array.prototype.slice.apply(arguments,b||[0])))}}}),c}),KISSY.add("UFO/ComponentQuery",function(a){function b(a,b){return b.method.apply(this,[a].concat(b.args));
}function c(a,b){for(var c,d=[],e=0,f=a.length,g=">"!==b;f>e;e++)(c=a[e]).getRefItems&&(d=d.concat(c.getRefItems(g)));return d}function d(a,b,c){if("*"===b)return a.slice();for(var d,e=[],f=0,g=a.length;g>f;f++)(d=a[f])&&d.isType&&d.isType(b,c)&&e.push(d);return e}function e(a,b){for(var c,d=[],e=0,f=a.length;f>e;e++)(c=a[e]).hasCls(b)&&d.push(c);return d}function f(a,b){for(var c,d=[],e=0,f=a.length;f>e;e++)(c=a[e]).getId()===b&&d.push(c);return d}var g=this,h=/^(\s?([>\^])\s?|\s|$)/,i=/^(#)?([\w\-]+|\*)(?:\((true|false)\))?/,j=[{re:/^\.([\w\-]+)(?:\((true|false)\))?/,method:d},{re:/^(?:[\[](?:@)?([\w\-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]])/,method:function(a,b,c,d){for(var e,f=[],g=0,h=a.length;h>g;g++)e=a[g],(d?String(e[b])===d:e[b])&&f.push(e);return f}},{re:/^#([\w\-]+)/,method:f},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:function(a,b,c){return g.pseudos[b](a,c)}}],k=(g.Query=function(a){a=a||{},UFO.apply(this,a)},UFO.augment(g.Query,{execute:function(d){var e,f,g=this.operations,h=0,i=g.length;for(a.isArray(d)&&(f=d);i>h;h++)if(f="^"===(e=g[h]).mode?function(a){for(var b,c=[],d=0,e=a.length;e>d;d++)for(b=a[d];b=b.ownerCt||b.floatParent;)c.push(b);return c}(f||[d]):e.mode?c(f||[d],e.mode):b(f||c([d]),e),h===i-1)return f;return[]},is:function(c){var d,e,f=this.operations,g=a.isArray(c)?c:[c],c=g.length,h=f[f.length-1];if((g=b(g,h)).length!==c)return!1;if(1<f.length)for(e=0,d=g.length;d>e;e++)if(-1===a.indexOf(this.execute(),g[e]))return!1;return!0}}),{cache:{},pseudos:{not:function(a,b){for(var c,d=k,e=0,f=a.length,g=[],h=-1;f>e;++e)c=a[e],d.is(c,b)||(g[++h]=c);return g},first:function(a){var b=[];return 0<a.length&&b.push(a[0]),b},last:function(a){var b=a.length,c=[];return b>0&&c.push(a[b-1]),c}},query:function(b,c){for(var d,e,f,g=b.split(","),h=g.length,i=0,j=[],k=[],l={};h>i;i++)b=a.trim(g[i]),d=this.cache[b]||(this.cache[b]=this.parse(b)),j=j.concat(d.execute(c));if(1<(e=j.length)){for(i=0;e>i;i++)f=j[i],console.log("cmp.id",f.id),l[f.id]||(k.push(f),l[f.id]=!0);j=k}return j},is:function(b,c){if(!c)return!0;for(var d=c.split(","),e=d.length,f=0;e>f;f++)if(c=a.trim(d[f]),(this.cache[c]||(this.cache[c]=this.parse(c))).is(b))return!0;return!1},parse:function(b){for(var c,k,l,m,n,o,p,q=[],r=j.length;b&&c!==b;){for((k=(c=b).match(i))&&(l=k[1],q.push("#"===l?{method:f,args:[a.trim(k[2])]}:"."===l?{method:e,args:[a.trim(k[2])]}:{method:d,args:[a.trim(k[2]),Boolean(k[3])]}),b=b.replace(k[0],""));!(m=b.match(h));)for(o=0;b&&r>o;o++){if(p=j[o],n=b.match(p.re),p.method,n){q.push({method:p.method,args:n.slice(1)}),b=b.replace(n[0],"");break}o===r-1&&console.error('Invalid ComponentQuery selector: "'+arguments[0]+'"')}m[1]&&(q.push({mode:m[2]||m[1]}),b=b.replace(m[0],""))}return new g.Query({operations:q})}});return k}),KISSY.add("UFO/Component",function(a,b,c,d){function e(b){this.config=b||{},a.mix(this,b,!0,void 0,!0),this.id=a.guid(),this.tplId&&(f=this.tpl=a.one("#"+this.tplId).html()),e.superclass.constructor.call(this,b),this.initComponent()}var f="<div></div>";return a.extend(e,c),UFO.augment(e,{alias:"component",initComponent:function(){this.el||(f=this.tpl||f,this.el=a.all(f)),this.bodyStyle=a.mix(this.bodyStyle||{},{padding:this.bodyPadding},!0),this.getBodyContainer().css(this.bodyStyle),this.style=a.mix(this.style||{},{padding:this.padding,margin:this.margin}),this.el.css(this.style),this.cls&&this.addClass(this.cls),this.bodyCls&&this.getBodyContainer().addClass(this.bodyCls),this.attributes&&this.el.attr(this.attributes),this.addCmpEvents()},setSize:function(a,b){this.el.width(a),this.el.height(b)},toEl:function(){return this.el},getEl:function(){return this.toEl()},getTargetEl:function(){},getBodyContainer:function(){return this.el},getContentTarget:function(){return this.el},render:function(b){(b="string"==typeof b?(b=a.one("#"+b))||a.one(b):b).append(this.toEl()),this.fire("afterrender",this)},onAdded:function(a,b){var c=this;c.ownerCt=a,c.fireEvent("added",c,a,b)},css:function(b,c){var d=Array.prototype.slice.call(arguments,0);return 1===d.length&&a.isString(d[0])?el.css(b):this.el.css(b,c),this},removeClass:function(a){return this.el.removeClass(a),this},addClass:function(a){return this.el.addClass(a),this},hasClass:function(a){return this.el.hasClass(a)},hasCls:function(a){return this.hasClass(a)},setDisabled:function(a){(this.disabled=a)?this.el.attr("disabled","disabled"):this.el.attr("disabled","")},show:function(){return!1!==this.fire("beforeshow")&&(this.el.show(),this.fire("show")),this},hide:function(a){var b=this;return!1!==this.fire("beforehide")&&(this.el.hide(),b.destroy&&(b.el.remove(),delete b),b.fire("hide"),a)&&a(),this},getRootContainer:function(){return this.rootContainer},getId:function(){return this.id},up:function(a){var b=this.getBubbleTarget();if(a)for(;b;b=b.getBubbleTarget())if(d.is(b,a))return b;return b},getBubbleTarget:function(){return this.ownerCt},addCmpEvents:function(){},set:function(a,b){this[a]=b},get:function(a){return this[a]},isType:function(a){return UFO.isType(this,a)}}),e},{requires:["node","./EventSupport","./ComponentQuery"]}),KISSY.add("UFO/mask/Mask",function(a,b,c){function d(a){d.superclass.constructor.call(this,a)}var e=['<div class="mask-container visible">','	<div class="masker">',"	</div>","</div>"].join(""),f=document.body,g=a.one(f);return a.extend(d,c),UFO.augment(d,{alias:"mask",initComponent:function(){this.el=a.one(e),this.backdrop=a.one('<div class="backdrop visible backdrop-loading active" style="position:absolute;"></div>'),this.maskTarget=this.maskTarget||g,this.setMaskBody(this.createMaskBody()),this.text&&this.setText(this.text),d.superclass.initComponent.apply(this,arguments)},setMaskBody:function(a){this.el.one(".masker").html(""),this.el.one(".masker").append(a)},setText:function(a){this.text=a,this.el.one(".masker span").html(a)},createMaskBody:function(){return"<span></span>"},show:function(){!1!==this.fire("beforeshow")&&(this.maskTarget.append(this.backdrop),this.maskTarget.append(this.el),this.el.addClass("active"))},hide:function(a){var b=this;!1!==this.fire("beforehide")&&(this.el.removeClass("active"),setTimeout(function(){a&&a(),b.backdrop.remove(),b.el.remove(),b.fire("hide"),delete b},200))},addCmpEvents:function(){var b=this;d.superclass.addCmpEvents.apply(this,arguments),g==this.maskTarget&&(this.on("hide",function(){g.removeClass("modal-open"),a.one(document).one("html").removeClass("modal-open"),f.scrollTop=b.origScrollTop}),this.on("beforeshow",function(){b.origScrollTop=f.scrollTop,g.addClass("modal-open"),a.one(document).one("html").addClass("modal-open")}))}}),d},{requires:["node","../Component"]}),KISSY.add("UFO/mask/tpl/loading-svg-tpl",function(){return'\n<span class="spinner spinner-big" style="text-align: center; display: block; width: 100%;"><svg\n		viewBox="0 0 64 64">\n		<g stroke-width="4" stroke-linecap="round">\n		<line y1="12" y2="20" transform="translate(32,32) rotate(180)">\n		<animate attributeName="stroke-opacity" dur="750ms"\n			values="1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1"\n			repeatCount="indefinite"></animate></line>\n		<line y1="12" y2="20" transform="translate(32,32) rotate(210)">\n		<animate attributeName="stroke-opacity" dur="750ms"\n			values="0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0"\n			repeatCount="indefinite"></animate></line>\n		<line y1="12" y2="20" transform="translate(32,32) rotate(240)">\n		<animate attributeName="stroke-opacity" dur="750ms"\n			values=".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1"\n			repeatCount="indefinite"></animate></line>\n		<line y1="12" y2="20" transform="translate(32,32) rotate(270)">\n		<animate attributeName="stroke-opacity" dur="750ms"\n			values=".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15"\n			repeatCount="indefinite"></animate></line>\n		<line y1="12" y2="20" transform="translate(32,32) rotate(300)">\n		<animate attributeName="stroke-opacity" dur="750ms"\n			values=".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25"\n			repeatCount="indefinite"></animate></line>\n		<line y1="12" y2="20" transform="translate(32,32) rotate(330)">\n		<animate attributeName="stroke-opacity" dur="750ms"\n			values=".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35"\n			repeatCount="indefinite"></animate></line>\n		<line y1="12" y2="20" transform="translate(32,32) rotate(0)">\n		<animate attributeName="stroke-opacity" dur="750ms"\n			values=".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45"\n			repeatCount="indefinite"></animate></line>\n		<line y1="12" y2="20" transform="translate(32,32) rotate(30)">\n		<animate attributeName="stroke-opacity" dur="750ms"\n			values=".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55"\n			repeatCount="indefinite"></animate></line>\n		<line y1="12" y2="20" transform="translate(32,32) rotate(60)">\n		<animate attributeName="stroke-opacity" dur="750ms"\n			values=".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65"\n			repeatCount="indefinite"></animate></line>\n		<line y1="12" y2="20" transform="translate(32,32) rotate(90)">\n		<animate attributeName="stroke-opacity" dur="750ms"\n			values=".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7"\n			repeatCount="indefinite"></animate></line>\n		<line y1="12" y2="20" transform="translate(32,32) rotate(120)">\n		<animate attributeName="stroke-opacity" dur="750ms"\n			values=".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85"\n			repeatCount="indefinite"></animate></line>\n		<line y1="12" y2="20" transform="translate(32,32) rotate(150)">\n		<animate attributeName="stroke-opacity" dur="750ms"\n			values="1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1"\n			repeatCount="indefinite"></animate></line></g></svg></span>\n'}),KISSY.add("UFO/mask/LoadingMask",function(a,b,c,d){function e(a){e.superclass.constructor.call(this,a)}return a.extend(e,c),UFO.augment(e,{alias:"loadingAnimMask",createMaskBody:function(){return d}}),e},{requires:["node","./Mask","./tpl/loading-svg-tpl"]}),KISSY.add("APP/util/ImageUtil",function(a,b,c,d){const e=new IntersectionObserver(function(a){a.forEach(function(a){a.isIntersecting&&(a.target.src=a.target.getAttribute("data-ks-lazyload"),e.unobserve(a.target),a.target.removeAttribute("data-ks-lazyload"))})},{threshold:0,rootMargin:"200px"});return{loadImages:function(a){a.forEach(function(a){e.observe(a)})}}}),KISSY.add("UFO/util/Storage",function(a,b){return{setItem:function(a,b,c){var d=typeof c;"string"==d||"number"==d||"boolean"==d?a.setItem(b,c):a.setItem(b,JSON.stringify(c))},getItem:function(a,b){a=a.getItem(b);try{return JSON.parse(a)}catch(b){return a}},setLocalItem:function(a,b){this.setItem(localStorage,a,b)},getLocalItem:function(a){return this.getItem(localStorage,a)},setSessionItem:function(a,b){this.setItem(sessionStorage,a,b)},getSessionItem:function(a){return this.getItem(sessionStorage,a)}}},{requires:["node"]}),KISSY.add("APP/util/ParamUtil",function(a){return{processParam:function(b){for(var c in b){var d=b[c];a.isArray(d)&&(b[c]=d[0])}return b},packParam:function(b){return a.unparam(b.substring(b.indexOf("?")+1))}}}),KISSY.add("APP/app",function(a,b,c){var d="2.9.5",e=c.processParam(a.unparam(decodeURIComponent(location.search.slice(1)))),f=navigator.userAgent.toLowerCase(),g=f.match(/(hlj-\w+)\/(\d\.\d\.\d)/i),h="hlj_customer_position",i="hlj_user",j=void 0,k=void 0,l=[{name:"北京市",code:"110100"},{name:"上海市",code:"310100"},{name:"杭州市",code:"330100"},{name:"成都市",code:"510100"},{name:"深圳市",code:"440300"},{name:"广州市",code:"440100"},{name:"武汉市",code:"420100"},{name:"南京市",code:"320100"},{name:"天津市",code:"120100"},{name:"重庆市",code:"500100"}],m={apiHost:"//app.helijia.com",baseUrl:"//app.helijia.com/zmw"},n={imgBaseUrl:"../",version:d};a.mix(n,m);var o={config:n,getCookie:function(a){var b;return document.cookie.length>0&&(b=document.cookie.indexOf(a+"="),-1!=b)?(b=b+a.length+1,c_end=document.cookie.indexOf(";",b),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(b,c_end))):""},getCity:function(a){return this.getCityMap()[a]||this.getCityMap()[110100]},getCityByName:function(a){return/市$/.test(a)||(a+="市"),this.getNameKeyCityMap()[a]||this.getNameKeyCityMap()["北京市"]},getCityMap:function(){if(!j){j={};for(var a,b=0,c=l.length;c>b;b++)a=l[b],j[a.code]=a}return j},getNameKeyCityMap:function(){if(!k){k={};for(var a,b=0,c=l.length;c>b;b++)a=l[b],k[a.name]=a}return k},getCityList:function(a){return a&&a(result),l},setPosition:function(a){console.log("setPosition",a),a.city_code||(a.city_code=this.getCityByName(a.city).code),b.setSessionItem(h,a)},getPosition:function(){b.getSessionItem(h)},setSessionUser:function(a){b.setSessionItem(i,a)},getSessionUser:function(){return b.getSessionItem(i)},isLogined:function(){return!!this.getSessionUser()},getParam:function(){return e},isApp:function(){return g&&("hlj-ios"==g[1]||"hlj-android"==g[1])},isAdroidApp:function(){return g&&"hlj-android"==g[1]},isIosApp:function(){return g&&"hlj-ios"==g[1]},getAppVersion:function(){return g&&g[2]},getRunEnv:function(){return g&&g[1]},isMicroMessenger:function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},notifyApp:function(a,b){var c=navigator.userAgent;if("micromessenger"==c.toLowerCase().match(/MicroMessenger/i))return void(window.location="http://www.helijia.com/APP/down.html");c.match(/(iPhone|iPod|iPad);?/i)?window.location=a:c.match(/android/i)&&(window.location=b);var d=+new Date;setTimeout(function(){!window.document.webkitHidden&&setTimeout(function(){+new Date-d<2e3&&(window.location="http://www.helijia.com/APP/down.html")},500)},500)}};return o},{requires:["UFO/util/Storage","./util/ParamUtil"]}),KISSY.add("APP/action/Action",function(a,b,c,d){var e=a,f=b("APP/app");return{query:function(b,c,d,e){console.log("query == ",b);var g=a.Defer();return b.indexOf("/exchange.json")>=0?KISSY.use("APP/data/exchange",function(a,b){d(b),g.resolve(b)}):b.indexOf("/products.json")>=0||b.indexOf("/get_artisan_products_six.json")>=0?KISSY.use("APP/data/products_list",function(a,e){var f=e(b,c);d(f),g.resolve(f)}):b.indexOf("/get_product_tags.json")>=0?KISSY.use("APP/data/products_tags",function(a,b){var e=b(c);d(e),g.resolve(e)}):b.indexOf("/product_detail.json")>=0?KISSY.use("APP/data/product",function(a,b){var e=b(c);d(e),g.resolve(e)}):b.indexOf("/artisan_customer_date_list.json")>=0?KISSY.use("APP/data/artisan_available_time",function(a,b){d(b),g.resolve(b)}):b.indexOf("/artisan_common_list.json")>=0?KISSY.use("APP/data/comments_list",function(a,b){var e=b(c);d(e),g.resolve(e)}):b.indexOf("/artisans.json")>=0?KISSY.use("APP/data/artisans_list",function(a,b){d(b),g.resolve(b)}):b.indexOf("/get_product_label_list.json")>=0?KISSY.use("APP/data/products_label_list",function(a,b){d(b),g.resolve(b)}):b.indexOf("/verify_mobile.json")>=0?KISSY.use("APP/data/verify_mobile",function(a,b){var e=b(c);d(e),g.resolve(e)}):b.indexOf("/orders.json")>=0?KISSY.use("APP/data/orders_list",function(a,b){d(b),g.resolve(b)}):b.indexOf("/order_detail.json")>=0?KISSY.use("APP/data/order",function(a,b){d(b),g.resolve(b)}):b.indexOf("/cancel_reason.json")>=0?KISSY.use("APP/data/order_cancel_reason",function(a,b){d(b),g.resolve(b)}):b.indexOf("/artisan_detail.json")>=0?KISSY.use("APP/data/artisan",function(a,b){d(b),g.resolve(b)}):b.indexOf("/v2/store_detail")>=0?KISSY.use("APP/data/shop",function(a,b){d(b),g.resolve(b)}):console.error("XMLHttpRequest error: ",f.config.baseUrl+b+"?"+a.param(c)),g.promise},ajax2:function(b){a.mix(b,{dataType:"json",headers:{"X-Requested-With":!1}},!1);var c=f.getSessionUser();return c&&(b.data=a.mix({user_id:c.user_id,token:c.token},b.data)),b.data=a.mix({version:f.config.version},b.data),e.io(b)},ajax:function(a){return a.url=f.config.baseUrl+a.url,this.ajax2(a)},post:function(a,b,c,d){return this.ajax({type:"post",url:a,data:b,success:c,error:function(a){d&&d(a),alert("网络错误"),console.error(a)}})},update:function(a,b,c,d){return this.post(a,b,c,d)},uploadImage2:function(a){var b=new XMLHttpRequest;a.updateProgress&&b.addEventListener("progress",a.updateProgress,!1),a.success&&b.addEventListener("load",a.success,!1),a.error&&b.addEventListener("error",a.error,!1),a.transferCanceled&&b.addEventListener("abort",a.transferCanceled,!1);var c=new FormData;c.append("uploadImage",a.file),b.open("post",f.config.baseUrl+"/v2/upload_image",!0),b.send(c)},postFormData:function(b,c,d,g){var h;a.isString(b)?h={}:(h=b,b=h.url,c=h.data,d=h.success,g=h.error);var i=f.getSessionUser();i&&a.mix(c,{user_id:i.user_id,token:i.token},!1);var j=new FormData;for(var k in c)j.append(k,c[k]);return a.mix(h,{type:"post",url:f.config.baseUrl+b,data:j,dataType:"json",headers:{"X-Requested-With":!1},cache:!1,contentType:!1,processData:!1,success:d,error:g}),e.io(h)}}}),KISSY.add("UFO/core/lang/Number",function(a){return{toSignedNumberString:function(a,b){return a>0?"+"+String(a):0==a?(b||"")+String(a):String(a)},toHex:function(a){return a.toString(16)},toAmountWords:function(a){for(var b=["","万","亿"],c=["拾","佰","仟"],d=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],e=String(a).split("."),f=0,g=0,h=0,i="",j=0,k=1,l=e[0].length;l>=k;k++){var j=e[0].charAt(l-k),m=0;l-k-1>=0&&(m=e[0].charAt(l-k-1)),0!=(h+=Number(j))&&(i=d[Number(j)].concat(i),"0"==j)&&(h=0),l-k-1>=0&&(3!=f?(0!=m&&(i=c[f].concat(i)),f++):("万"!=i.charAt(f=0)&&"亿"!=i.charAt(0)||(i=i.substr(1,i.length-1)),i=b[g].concat(i),h=0)),3==f&&g++}return i+="元",e[1]?(0!=(j=e[1].charAt(0))&&(i+=d[Number(j)]+"角"),0!=(j=e[1].charAt(1))&&(i+=d[Number(j)]+"分")):i+="整",i}}}),KISSY.add("UFO/core/lang/Date",function(a,b){return{getMonthName:function(a,b){return(!0===b?["&#74;&#97;&#110;","&#70;&#101;&#98;","&#77;&#97;&#114;","&#65;&#112;&#114;","&#77;&#97;&#121;","&#74;&#117;&#110;","&#74;&#117;&#108;","&#65;&#117;&#103;","&#83;&#101;&#112;","&#79;&#99;&#116;","&#78;&#111;&#118;","&#68;&#101;&#99;"]:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"])[a.getMonth()]},getWeekName:function(a,b){return(!0===b?["&#83;&#117;&#110;","&#77;&#111;&#110;","&#84;&#117;&#101;","&#87;&#101;&#100;","&#84;&#104;&#117;&#114;","&#70;&#114;&#105;","&#83;&#97;&#116;"]:["Sun","Mon","Tue","Wed","Thur","Fri","Sat"])[a.getDay()]},format:function(a,c){if(!a)return"";c=c||"yyyy-MM-dd mm:ss";var d,e,f,g={TZ:b.toSignedNumberString(parseInt(-a.getTimezoneOffset()/60)),"q+":Math.floor((a.getMonth()+3)/3),"y+":a.getFullYear(),MN:this.getMonthName(a,!0),"M+":a.getMonth()+1,"d+":a.getDate(),WN:this.getWeekName(a),"h+":a.getHours(),"H+":(d=a.getHours())<13?d:d-12,"m+":a.getMinutes(),MP:a.getMinutes()-(new Date).getMinutes(),"s+":a.getSeconds(),DP:a.getHours()<12?"AM":"PM"};for(e in g)new RegExp("("+e+")").test(c)&&(f=RegExp.$1,c=c.replace(f,function(){return"yy"===f?g[e]%100:1<f.length&&"number"==typeof g[e]&&-1<g[e]&&g[e]<10?"0"+g[e]:g[e]}));return c}}},{requires:["./Number"]}),KISSY.add("APP/util/XTemplateUtil",function(a,b,c,d){return b.addCommand("getImgAbsolutePath",function(a,b){var c=b.params[0];return c?d.config.imgBaseUrl+(0===c.indexOf("/")?c.substr(1):c):"../resources/images/default_user.png"}),b.addCommand("formatPrice",function(a,b){return Number(b.params[0]).toFixed(2)}),b.addCommand("formatDateTime",function(b,d){var e=d.params[0],f="yyyy-MM-dd";return a.isNumber(e)&&(e=new Date(e)),2===d.params.length&&(f=d.params[1]),c.format(e,f)}),b.addCommand("fixedDigits",function(a,b){var c=2;return 2===b.params.length&&(c=b.params[1]),Number(b.params[0]).toFixed(c)}),b.addCommand("join",function(a,b){var c=",";return 2===b.params.length&&(c=b.params[1]),b.params[0].join(c)}),b.addCommand("getHost",function(a,b){return location.host}),b.addCommand("encodeURIComponent",function(a,b){return encodeURIComponent(b.params[0])}),{}},{requires:["xtemplate","UFO/core/lang/Date","../app"]}),KISSY.add("APP/product/tpl/product-tpl",function(){return'<div class="main product-detail has-fix-footer-button background">\n	<header class="bar-love header bar">\n		<a href="javascript:history.go(-1);" class="button button-clear button-back">\n			<i class="icon iconfont icon-back"></i>\n		</a>\n		<h1 class="title">{{product_name}}</h1>\n		<div class="buttons buttons-right">	\n		</div>\n	</header>\n	<div class="content has-header">	\n		<section class="section section-product">\n			<div id="product_pic_slides" class="product_pic_slides slides">\n					{{#if promotion_pic}}\n						<img class="label-promotion" src="{{getImgAbsolutePath promotion_pic}}">\n					{{/if}}\n			<!--Slide控件开始-->\n					<div class="slides_container tab-content clearfix">\n					{{#each pics}}\n						<div class="tab-pannel">\n						  <textarea class="data-lazyload">\n 								<a href="javascript:;" class="product-img-wrapper">\n								<img  src="{{getImgAbsolutePath this}}">\n							</a>\n           	  </textarea>\n						</div>\n					{{/each}}\n					</div>\n					{{#if pics.length>1}}\n					<ul class="tab-nav pagination">\n						{{#each pics}}\n						<li class="pagination-bullet">\n							<a href="javascript:void(0);"></a>\n						</li>\n						{{/each}}\n					</ul>\n					{{/if}}\n			 </div>\n			<div class="title">\n				<b>{{product_name}}</b>\n				{{#if service_mode}}\n				<span class="label-one2-many">已报:{{product_ext_info_multiple.apply_nums}}</span>\n				{{else}}\n				<span class="sold-amount">{{sold_amount}}人做过</span>\n				{{/if}}\n				<p> \n				￥{{formatPrice price}}{{#if customer_visit_price!==price}}~{{formatPrice customer_visit_price}}{{/if}}\n				</p>\n				<del>市场价：{{formatPrice market_price}}元</del>\n			</div>\n			<!-- 一对多不显示在这里 -->\n			{{^if service_mode}}\n			<div class="desc">\n				{{#if service_sex}}\n				<span class="spec-desc">仅支持为女宾提供预约服务</span>\n				{{/if}}\n				<p>	\n				{{desc}}\n				</p>\n				{{#if work_time}}\n				<div class="label-metrics" style="margin-right: 10px;"><span class="name">耗时</span><span class="value">{{work_time}}</span></div>\n				{{/if}}\n				{{#if keep_time}}{{^if keep_time==="0天"}}\n				<div class="label-metrics label-metrics-orange"><span class="name">保持</span><span class="value">{{keep_time}}</span></div>\n				{{/if}}{{/if}}\n			</div>\n			{{/if}}\n			<!--  \n			<ul class="opera">\n				<li class="h_shoucang">\n				<i class="icon iconfont icon-star" style="color:#d2ad55"></i>收藏</li>\n				<img src="../resources/images/shu.jpg">\n				<a href="javascript:;"><li class="h_lianxi"><i class="icon iconfont icon-smile" style="color:#d45987"></i>联系ta</li></a>\n			</ul>\n			-->\n		</section>\n		\n		<!-- 一对多 服务时间地址 -->\n		{{#if service_mode}}\n		<section class="section list-block">\n			<ul class="">\n				<li>\n					<a href="javascript:;">\n						<div class="item-content">\n		            <div class="item-media">\n		            	<i class="icon iconfont icon-datetime" style="color:#8284a4;"></i>\n		            </div>\n		            <div class="item-inner"> \n								<!-- service_mode -->\n		              <div class="item-title">{{product_ext_info_multiple.service_time}}</div>\n		            </div>\n		          </div>\n					</a>\n				</li>\n				\n				<li>\n					<a href="javascript:;" >\n						<div class="item-content">\n		            <div class="item-media">\n		            	<i class="icon iconfont icon-location" style="color:#f7ad58;"></i>\n		            </div>\n		            <div class="item-inner" style="padding-right: 15px;"> \n		              <div class="item-title" style="white-space: normal;">{{product_ext_info_multiple.address}}</div>\n		            </div>\n		          </div>\n					</a>\n				</li>\n			</ul>\n		</section>\n		{{/if}}\n	\n		<!--服务内容-->\n		{{#if processes&&processes.length}}\n		<section class="section section-service-items">\n			<div class="item hairline-remove">服务内容（{{processes.length}}个步骤）</div>\n			<!--service_items_slides 控件开始-->\n			<div id="service_items_slides" class="service-items-slides">\n				<div class="slides_container tab-content">\n				{{#each processes}}\n					<div class="tab-pannel">\n						  \n							<a href="javascript:;">\n								<img src="../resources/images/default_product.png" data-ks-lazyload="{{getImgAbsolutePath pic_url}}">\n								<span class="label-step">{{process_seq}}</span>\n								<div class="footer-wrapper">\n			        	   <h3>{{process_name}}<span>({{process_time}})</span></h3>\n			        	   <p>{{process_desc}}</p>\n		        	   </div>\n							</a>\n						 \n					</div>\n				{{/each}}\n				</div>\n		  </div>\n		</section>\n		{{/if}}\n	\n		<!-- 项目产品 -->\n		 {{#if materials&&materials.length}}\n		 <section class="section section-material">\n		 	 <div class="item hairline-remove">项目产品</div>\n			 <div id="material_slides" class="material-slides"><!--Slide控件开始-->\n					<div class="slides_container tab-content">\n					{{#each materials}}\n						<div class="tab-pannel">\n						 {{#if xcount>1}}\n						 <textarea class="data-lazyload">\n						 {{/if}}\n							<a href="#" class="item item-thumbnail-left">                                                         \n							  <img src="{{getImgAbsolutePath pic_url}}">\n							  <h3>{{material_name}}</h3>\n							  <div class="desc">{{material_desc}}</div>\n							  <div class="brand">品牌：{{brand_name}}</div>\n							  <div class="origin">产地：{{product_area}}</div>\n							</a>\n						 {{#if xcount>1}}\n						 </textarea>\n						 {{/if}}\n						</div>\n					{{/each}}\n					</div>\n			 </div>\n		 </section>\n		 {{/if}}\n		 \n		\n		 <!-- 项目说明  -->\n		 <!-- 一对多 -->\n		 {{#if service_mode}}\n		 		<section class="section section-instruction">\n		 			<div class="item no-padding-left">项目说明</div>\n		 			<div class="item-class item-enroll">报名截止：{{product_ext_info_multiple.apply_end_time}}</div>\n		 			<div class="item-class item-enroll">最低开班：{{product_ext_info_multiple.lower_nums}}（限{{product_ext_info_multiple.limit_nums}}人）</div>\n		 			<p class="item-class item-desc">\n		 			{{desc}}\n		 			</p>\n		 		</section>\n		 {{else}}\n			 {{#if fit_people||matter_attent}}\n			 <section class="section section-instruction">\n			 	<div class="item no-padding-left">项目说明</div>\n			 	{{#if fit_people}}\n			 	<div class="label-left-field">\n					<label class="label">适用人群：</label>\n					<div class="field">{{fit_people}}</div>\n				</div>\n				{{/if}}\n				\n				{{#if matter_attent}}\n				<div class="label-left-field">\n					<label class="label">注意事项：</label>\n					<div class="field">{{matter_attent}}</div>\n				</div>\n				{{/if}}\n			 </section>\n			 {{/if}}\n		 {{/if}}\n		\n	  <!-- 预约时间 -->\n	  {{^if service_mode}}\n		<section class="section">\n			<a name="service_time" class="item item-icon-left item-icon-right" href="javascript:;" action="showServiceTimeModal">\n				<i class="icon iconfont icon-datetime" style="color:#75c4af;"></i>\n				<span class="item-content">查看预约时间</span>\n				<i class="icon iconfont icon-forward"></i>\n			</a>\n		</section>\n		{{/if}}\n		\n		\n		<textarea class="data-lazyload" name="section-artisan">\n		<section class="section section-artisan">\n			<a href="../artisan/index.html?artisan_id={{artisan.artisan_id}}" class="item item-thumbnail-left item-header item-icon-right">\n				<span class="item-image"  style="left:0;" href="javascript:;">\n					<img class="header-img" src="{{getImgAbsolutePath artisan.avatar}}"> \n				</span>\n				<div class="item-detail">\n					<h3 class="name">{{artisan.name}}</h3>\n					<span class="star-info">\n					{{#if artisan.artisan_level}}\n					<img src="../resources/images/star/{{artisan.artisan_level*0.5}}.gif" style="width:{{calStarWidth artisan.artisan_level}}px;"> \n					{{/if}}\n					{{#if artisan.artisan_glory}}<img src="../resources/images/star/glory.jpg" style="width: 20px; margin-top:3px; margin-left:-7px;" >{{/if}}\n					({{artisan.artisan_level_value}})\n					</span>\n					<div class="flex row-center detail">\n						<span class="price">均价:￥{{formatPrice artisan.ave_price}}</span>\n						<span class="time">接单数:{{formatPrice artisan.service_times}}</span>\n					</div>\n				</div>\n				<i class="icon iconfont icon-forward"></i>\n			</a>\n			\n			<ul class="item item-score flex row-divid-line-col no-padding-left" style="padding-top:10px; padding-bottom:10px;">\n				<li class="col">专业：<i class="i1">{{fixedDigits artisan.score_skill 2}}</i></li>\n				<li class="col">沟通：<i class="i2">{{fixedDigits artisan.score_communication 2}}</i></li>\n				<li class="col">守时：<i class="i3">{{fixedDigits artisan.score_punctuality 2}}</i></li>\n			</ul>\n			\n			<div class="item item-district">\n				<div class="item item-icon-left hairline-remove no-padding-left" style="border-width:0;padding-bottom:5px;">\n					<i class="icon iconfont icon-position" style="top:3px;"></i> 服务商圈\n				</div>\n				<div class="detail">\n					<p class="word-wrap">	{{join artisan.service_range}}</p>\n		      <div  class="switches">\n						<a href="javascript:;" class="switch switch-expand">  全部范围<i class="icon iconfont icon-expand"></i></a>\n						<a href="javascript:;" class="switch switch-collapse">点击收起<i class="icon iconfont icon-collapse"></i></a>\n					</div>\n				</div>\n			</div>\n			\n			<a href="../comment/index.html?artisan_id={{artisan.artisan_id}}&total={{artisan.reviews}}&excited={{artisan.excited}}&good={{artisan.good}}&normal={{artisan.normal}}&bad={{artisan.bad}}" class="item no-padding-left item-icon-left item-icon-right" >\n					<i class="icon iconfont icon-comment" ></i>\n					<div>顾客评价<span>({{artisan.reviews}})</span></div>\n					<i class="icon iconfont icon-forward"></i>\n			</a>\n		</section>\n		\n		<section class="section">\n			<a href="../other/service_illustration.html" class="item item-icon-right" >\n				平台服务说明\n				<i class="icon iconfont icon-forward"></i>\n			</a>\n		</section>\n		</textarea>\n		<section class="section section-foot" style="margin-bottom:0;">\n			<button class="button button-full button-love" action="buy_confirm">购买</button>\n		</section>  	 \n	 \n	\n	</div>\n</div>\n'}),KISSY.add("UFO/layout/Layout",function(a){function b(a){this.initLayout()}return UFO.augment(b,{alias:"layout",initLayout:function(){this.el=[]},doLayout:function(b){if(this.clearItems(),!a.isEmptyObject(b))for(var c,d=0,e=b.length;e>d;d++)null!=(c=b[d])&&(this.el.push(c.getEl?c.getEl():c),c.fire)&&c.fire("afterrender",c)},clearItems:function(){this.el=[]},calculate:function(){},toEl:function(){return this.el}}),b}),KISSY.add("UFO/container/Container",function(a,b,c,d,e,f){function g(a){g.superclass.constructor.call(this,a)}var h="<div></div>";return a.extend(g,d),UFO.augment(g,{alias:"container",initComponent:function(){this.el||(h=this.tpl||h,this.el=a.all(h));var b=(b=this.layout)||"layout";this.setLayout(b),this.initItems(),g.superclass.initComponent.apply(this,arguments)},updateLayout:function(){this.layout.doLayout(this.items),this.getBodyContainer().html("");for(var b,c=this.layout.toEl(),d=0,e=(c=a.isArray(c)?c:[c]).length;e>d;d++)b=c[d],this.getBodyContainer().append(b)},initItems:function(){var b;this.items&&(b=this.items,a.isArray(b)||(b=[b]),this.items=[],this.add(b))},add:function(b,c){a.isArray(b)||(b=[b]);var d=this;if(d.items=d.items||[],!a.isEmptyObject(b))for(var e,f=0,g=b.length;g>f;f++)e=b[f],e=UFO.createItem(e,d.defaults),d.items.push(e),e&&e.onAdded&&e.onAdded(d,f),d.fireEvent("add",d,e,f);return a.isEmptyObject(this.items)||this.updateLayout(),d.items},setLayout:function(a){this.layout=UFO.create(a)},getRefItems:function(a){for(var b,c=this,d=c.items,e=d.length,f=0,g=[];e>f;f++)b=d[f],g.push(b),a&&b&&b.getRefItems&&g.push.apply(g,b.getRefItems(!0));return c.floatingItems&&g.push.apply(g,c.floatingItems),g},query:function(a){return f.query(a=a||"*",this)},down:function(a){return this.query(a)[0]||null}}),g},{requires:["node","xtemplate","../Component","../layout/Layout","../ComponentQuery"]}),KISSY.add("UFO/modal/Modal",function(a,b,c,d){function e(a){e.superclass.constructor.call(this,a)}var f=document.body,g=['<div class="modal-backdrop">','	<div class="modal-backdrop-bg"></div>','	<div class="modal"></div>',"</div>"].join("");return a.extend(e,d),UFO.augment(e,{alias:"modal",initComponent:function(){this.el=a.one(g),this.modal=this.el.one(".modal"),this.animation=this.animation||"slide-in-left",this.modal.addClass(this.animation),this.createModal&&(this.items=this.createModal()),e.superclass.initComponent.apply(this,arguments);
},getModal:function(){return this.modal},getBodyContainer:function(){return this.modal},show:function(b){var c=this;return this.appended||(a.one(document.body).append(this.toEl()),this.appended=!0),e.superclass.show.apply(this,arguments),"none"!=this.animation&&(setTimeout(function(){c.modal.removeClass("ng-leave"),c.modal.addClass("ng-enter ng-enter-active")},0),setTimeout(function(){b&&b()},400)),this},hide:function(a){function b(){e.superclass.hide.call(c,a)}var c=this;"none"!=this.animation?(this.modal.addClass("ng-leave"),this.modal.removeClass("ng-enter ng-enter-active"),setTimeout(function(){b()},400)):b()},slideIn:function(a){this.show()},slideOut:function(a){this.hide()},addCmpEvents:function(){e.superclass.addCmpEvents.apply(this,arguments);var b=this;this.on("hide",function(){a.one(f).removeClass("modal-open"),a.one(document).one("html").removeClass("modal-open"),f.scrollTop=b.origScrollTop}),this.on("beforeshow",function(){b.origScrollTop=f.scrollTop,a.one(f).addClass("modal-open"),a.one(document).one("html").addClass("modal-open")}),this.el.delegate("click tap",".button-back, .button-close",function(a){return b.hide(),!1})}}),e},{requires:["anim","node","../container/Container"]}),KISSY.add("APP/widget/servicetime/tpl/service-time-tpl",function(){return'<div class="main service-time">\n	<header class="bar-love header bar">\n		<button class="button button-clear button-back">\n			<i class="icon iconfont icon-close"></i>\n		</button>\n		<h1 class="title">预约你的服务时间</h1>\n		<div class="buttons buttons-right">	\n			<button class="button button-clear button-ok">\n				 确定\n			</button>\n		</div>\n	</header>\n	<div class="content has-header">\n	<!-- service-time-wrapper start -->\n		<div class="service-time-wrapper">\n			<div class="bar-day">\n				<ul class="bar-day-inner clearfix">\n				</ul>\n				<span class="bar-corner"></span>\n			</div>\n			<!-- bar-day end -->\n			<div class="time-wrapper">\n			</div>\n		</div>\n		<!-- service-time-wrapper end -->\n	</div>\n	\n	<footer class="item item-divider item-footer" style="text-align: center;">滑动顶部日历条，查看30天可预约时间。</footer>\n	{{#if isFirstTime}}\n	<div class="pic-time-guid">\n		 <img class="pic-time-hand" src="../resources/images/pic_time_hand.png">\n	</div>\n	{{/if}}\n</div>'}),KISSY.add("APP/widget/servicetime/tpl/day-cell-tpl",function(){return'{{#each this}}\n<li class="{{#if select}}select{{/if}}">\n	<a class="button-day {{#if active}}active{{/if}}" href="javascript:;" data-key="{{key}}" data-value="{{value}}">\n		<div class="week">{{week}}</div>\n		<div class="day">{{day}}</div>\n	</a>\n</li>\n{{/each}}'}),KISSY.add("APP/widget/servicetime/tpl/time-cell-tpl",function(){return'<!-- state： 0锁定； 1未锁定可预约 ；2已预约； -->\n{{#each times}}\n	<a {{^if state===\'1\'}}disabled{{/if}} data-value="{{../date}} {{time}}" class="time-cell {{#if select}}select{{/if}}">{{time}}</a>\n{{/each}}'}),KISSY.add("APP/widget/servicetime/ServiceTimeModal",function(a,b,c,d,e,f,g,h,i,j){function k(a){k.superclass.constructor.call(this,a)}var l=["周日","周一","周二","周三","周四","周五","周六"],m=new c(j);return a.extend(k,d),UFO.augment(k,{initComponent:function(){k.superclass.initComponent.apply(this,arguments),this.bar_day_inner=this.el.one(".bar-day-inner"),this.time_wrapper=this.el.one(".time-wrapper"),this.init()},createDateBar:function(a){var b=[],d=0;for(var e in a){var g=new Date;g.setDate(g.getDate()+d);var h=l[g.getDay()],j=f.format(g,"MM/dd");0===d?h="今天":1===d&&(h="明天"),b.push({key:e,day:j,week:h,value:f.format(g,"yyyy-MM-dd")}),d++}var k=this.el.one(".bar-day").innerWidth(),m=k/7;this.bar_day_inner.width(m*d+65),this.bar_day_inner.html(new c(i).render(b)),this.bar_day_inner.all("li").css("width",m+"px")},init:function(){var a=this;e.query("/v2/artisan_customer_date_list.json",{service:"artisan_customer_date_list_one",product_id:a.param.product_id,artisan_id:a.param.artisan_id},function(b){console.log(b),b.ret&&(a.data=b.data,a.createDateBar(a.data),a.setActiveTab(0))},function(a){alert("网络错误")})},createModal:function(){var a=!g.get("service_time_widget_used");return a&&g.set("service_time_widget_used","1",1),a=!0,new c(h).render({isFirstTime:a})},renderTimeWrapperByKey:function(a,b){var c=this;c.time_wrapper.html(m.render({date:b,times:c.data[a]}))},setActiveTab:function(b){var c=this;a.isNumber(b)&&(b=this.el.one("ul.bar-day-inner li:nth-child("+(b+1)+") .button-day"));var d=b.attr("data-key"),e=b.attr("data-value");c.el.all(".button-day").removeClass("active"),b.addClass("active"),c.renderTimeWrapperByKey(d,e)},addCmpEvents:function(){k.superclass.addCmpEvents.apply(this,arguments);var b=this;this.el.delegate("click tap",".button-day",function(c){return b.setActiveTab(a.one(c.currentTarget)),!1}),this.el.delegate("click tap",".time-cell:not([disabled])",function(c){var d=a.one(c.currentTarget);return b.el.all(".time-cell").removeClass("select"),d.addClass("select"),!1}),this.el.delegate("click tap",".button-ok",function(a){var c=b.el.one(".time-cell.select").attr("data-value");return b.fire("ok",c),b.hide(),!1});var c=this.el.one(".pic-time-guid");c&&c.on("click tap",function(){return c.remove(),!1});var d=this.el.one(".pic-time-hand");d&&b.on("show",function(){d.addClass("hand-move")})}}),k},{requires:["node","xtemplate","UFO/modal/Modal","../../action/Action","UFO/core/lang/Date","cookie","./tpl/service-time-tpl","./tpl/day-cell-tpl","./tpl/time-cell-tpl"]}),KISSY.add("APP/product/tpl/buy-confirm-tpl",function(){return'<div class="main buy-confirm  background has-fix-footer-button">\n	<header class="bar-love header bar">\n		<button class="button button-clear button-back">\n			<i class="icon iconfont icon-back"></i></button>\n		<h1 class="title">项目</h1>\n		<div class="buttons buttons-right">	\n		</div>\n	</header>\n	<div class="content has-header scroll-content" style="height: calc(100% - 83px);">	\n		<section class="section-confirm section-confirm-product" style="padding-left:15px;">\n			<div class="item no-padding-left">手艺人：{{artisan.name}}</div>\n			<div class="item item-avatar item-product" href="javascript:;">\n			  <img src="{{getProductPic pics}}">\n			  <h2>{{product_name}}</h2>\n			  <p name="price">￥{{#if artisan_visit}}{{formatPrice price}}{{else}}{{formatPrice customer_visit_price}}{{/if}}</p>\n			</div>\n		</section>\n		\n		{{#if artisan_visit&&customer_visit}}\n		<div class="item item-divider">选择服务方式</div>\n		<section class="section-confirm">\n			<ul class="row item-service-type">\n				<li class="col">\n					<a class="artisan-come service-type select" href="javascript:;" data-service_type="artisan_visit">\n						<div class="img-wrapper"></div>\n						<div>手艺人上门</div>\n					</a>\n				</li>\n				<li class="col">\n				  <a class="customer-go service-type" data-service_type="customer_visit">\n				  	<div class="img-wrapper" href="javascript:;"></div>\n						<div>顾客到店</div>\n					</a>\n				</li>\n			</ul>\n		</section>\n		{{/if}}\n		\n		<div class="item item-divider">选择时间、地点</div>\n		 \n		<section class="section-confirm section-time-addr" style="padding-left:15px;">\n			\n			<a href="javascript:;" name="service_time" class="flex-item no-padding-left item-icon-right" action="showServiceTimeModal2" >\n			  <div class="item-icon-label">\n			  	<i class="iconfont icon-datetime">	</i> 	\n			  	服务时间\n			  </div>\n				<div  class="item-content">请选择服务时间</div>\n				<i class="icon iconfont icon-forward"></i>\n			</a>\n		 \n		 {{#if artisan_visit}}\n			<a href="javascript:;" class="flex-item no-padding-left item-icon-right item-addr" name="address" action="selectAddress">\n			  <div class="item-icon-label">\n			  	<i class="iconfont icon-location">	</i> 	顾客地址\n			  </div>\n				<div name="value" class="item-content">请选择地址</div>\n				<i class="icon iconfont icon-forward"></i>\n			</a>\n			{{/if}}\n			{{#if customer_visit}}\n			<a href="javascript:;" class="flex-item no-padding-left item-icon-right item-addr"  name="shop-address" style="{{#if artisan_visit}}display:none;{{/if}}" action="selectAddress">\n			  <div class="item-icon-label"><i class="iconfont icon-location">	</i> 	店铺地址</div>\n				<div name="value" class="item-content">请选择地址</div>\n				<i class="icon iconfont icon-forward"></i>\n			</a>\n			{{/if}}\n		</section>\n	</div>\n	\n	<section class="section-foot">\n		<button class="button button-full button-love" action="buy">确认</button>\n	</section>\n</div>'}),KISSY.add("APP/product/mods/BuyConfirmModal",function(a,b,c,d,e,f,g,h){function i(a){i.superclass.constructor.call(this,a)}return a.extend(i,d),a.augment(i,{initComponent:function(){i.superclass.initComponent.apply(this,arguments),this.init()},setServiceAddr:function(a){this.service_addr=a},initAddress:function(){var a=this,b=g.getSessionUser();if(b){var c=b.user_address;if(c&&c.length){var d=c[0];a.setServiceAddr(d),this.el.all("[name=address] [name=value]").html(c[0].address)}}},setServiceTime:function(b){b&&(this.data.service_time=b,this.service_time=b,a.all("[name=service_time] .item-content").html(b))},init:function(){this.initAddress()},createModal:function(){return new c(h,{commands:{getProductPic:function(a,b){return g.config.imgBaseUrl+b.params[0][0]}}}).render(this.data)},addCmpEvents:function(){i.superclass.addCmpEvents.apply(this,arguments);var b=this,c=this.el.one("[name=address]"),d=this.el.one("[name=shop-address]"),e=this.el.all("[name=price]");this.el.delegate("click tap",".button-back",function(a){return b.hide(),!1}),this.el.delegate("click tap","[name=address]:not([disabled])",function(c){var d=a.one(c.currentTarget);return d.attr("disabled","disabled"),b.serviceAddrModal?b.serviceAddrModal.show():a.use("APP/widget/serviceaddr/ServiceAddrModal",function(a,e){b.serviceAddrModal=new e({allowBlank:!1}),b.serviceAddrModal.on("ok",function(d){console.log("addr",d),a.one(c.currentTarget).one("[name=value]").html(d.city+d.address+(d.addrDetail?d.addrDetail:""));var e=g.getCityByName(d.city);d.city_code=e.code,b.setServiceAddr({city:e,address:d.title+(d.addressDetail||""),location:d.address+d.title,latitude:1e7*d.point.lat,longitude:1e7*d.point.lng}),g.setPosition(d)}),b.serviceAddrModal.on("hide",function(a){d.removeAttr("disabled")}),b.serviceAddrModal.show()}),!1}),this.el.delegate("click tap","[name=shop-address]:not([disabled])",function(c){var d=a.one(c.currentTarget);if(d.attr("disabled","disabled"),!b.data.service_time)return alert("请选择服务时间"),d.removeAttr("disabled"),!1;var d=a.one(c.currentTarget);return b.shopAddrModal?b.shopAddrModal.show():a.use("APP/product/mods/ShopAddrModal",function(a,e){b.shopAddrModal=new e({param:{product_id:b.data.product_id,service_time:b.data.service_time}}),b.shopAddrModal.on("hide",function(a){d.removeAttr("disabled")}),b.shopAddrModal.on("ok",function(d){console.log("addr",d),a.one(c.currentTarget).one("[name=value]").html(d.location||d.address),b.service_addr=d}),b.shopAddrModal.show()}),!1}),this.el.delegate("click tap",".service-type",function(f){var g=a.one(f.currentTarget),h=g.attr("data-service_type");return b.service_type=h,b.el.all(".service-type").removeClass("select"),g.addClass("select"),"artisan_visit"==h?(e.html("￥"+b.data.price),c.show(),d.hide()):(e.html("￥"+b.data.customer_visit_price),c.hide(),d.show()),!1}),this.el.delegate("click tap","[action=showServiceTimeModal2]:not([disabled])",function(c){var d=a.one(c.currentTarget);return d.attr("disabled","disabled"),b.serviceTimeModal?b.serviceTimeModal.show():KISSY.use("APP/widget/servicetime/ServiceTimeModal",function(a,c){b.serviceTimeModal=new c({param:{product_id:b.data.product_id,artisan_id:b.data.artisan.artisan_id}}),b.serviceTimeModal.show(),b.serviceTimeModal.on("hide",function(a){d.removeAttr("disabled")}),b.serviceTimeModal.on("ok",function(a){b.setServiceTime(a)})}),!1}),this.el.delegate("click tap","[action=buy]",function(c){if(!b.data.service_time)return alert("请选择服务时间"),!1;if(!b.service_addr)return alert("请选择服务地址"),!1;var d=g.getSessionUser(),e={reserve_time:b.data.service_time,service_time:b.data.service_time,service_addr:b.service_addr,service_type:b.service_type||"artisan_visit"},f=b.data,h=f.artisan;h.artisan_name=h.name,delete h.name,h.artisan_avatar=f.artisan.avatar,a.mix(e,h),delete f.artisan,f.product_pic=f.pics[0],a.mix(e,f),e.address=e.service_addr.location,d?(e.user_name=d.nick,e.user_mobile=d.mobile,d.order=e,g.setSessionUser(d)):console.log("未登录");var i={product_id:e.product_id,reserve_time:e.service_time,address:e.service_addr.location,latitude:e.service_addr.latitude,longitude:e.service_addr.longitude,address_id:e.service_addr.address_id,service_address_type:e.service_addr.service_address_type||"home",service_type:b.service_type||"artisan_visit"};return e.service_addr.city&&(i.city=g.getCity(e.service_addr.city).name),location.href="../order/orderConfirm.html?"+a.param(i),!1})}}),i},{requires:["node","xtemplate","UFO/modal/Modal","../../util/XTemplateUtil","../../action/Action","../../app","../tpl/buy-confirm-tpl"]}),KISSY.add("UFO/util/Form",function(a,b){return{getRecord:function(b){a.isString("form")&&(b=a.one(b));var c={};return b.all("input[type=text], input[type=radio]:checked, select, textfield, textarea").each(function(a,b){var d=a.attr("data-type"),e=a.attr("data-value")||a.val();null!=e&&(d&&"NUMBER"==d.toUpperCase()&&(e=Number(e)),c[a.attr("name")]=e)}),c},loadRecord:function(a,b){b=b||{},a.find("input[type=text], select").each(function(a,c){a.val(b($this.attr("name")))})}}},{requires:["node"]}),KISSY.add("APP/action/LoginAction",function(a,b,c,d){return{getVerifyCode:function(a,b,c){alert("您的验证码是：123456")},login:function(c,e,f){return b.query("/v2/verify_mobile.json",c,function(b){if(b.ret){var g=d.getSessionUser();if(g?a.mix(g,b.data):g=b.data,g.user_address)for(var h=0,i=g.user_address.length;i>h;h++)g.user_address[h].city=d.getCity(g.user_address[h].city);g.mobile=c.mobile,d.setSessionUser(g),e&&e(g)}else alert("登录失败"),f&&f()})}}},{requires:["./Action","UFO/util/Storage","../app"]}),KISSY.add("APP/login/tpl/login-tpl",function(){return'<div class="main login background">\n	<header class="bar-love header bar">\n		<button class="button button-clear button-back">\n			<i class="icon iconfont icon-back"></i></button>\n		<h1 class="title">快捷登录</h1>\n		<div class="buttons buttons-right">	\n		</div>\n	</header>\n	<div class="content has-header">\n		<div class="h_logininput">\n			<input type="text" name="mobile" placeholder="输入手机号" maxlength="11" class="h_loginwidth1"/>\n			<input type="text" name="verify_code" placeholder="验证码" maxlength="6" class="h_loginwidth2" />\n			<a action="get_verify_code" class="h_loginvalidate">获取验证码<i name="countdown" style="display:none;">(60)</i></a>\n		</div>\n		<div class="h_loginsub">\n			<button action="login" disabled="disabled">登录</button>\n			<p>点击"登录",即表示您同意<a href="../other/user_agreement.html">《河狸家用户协议》</a></p>\n		</div> \n	</div>\n</div>'}),KISSY.add("APP/login/mods/LoginPanel",function(a,b,c,d,e,f,g){function h(a){h.superclass.constructor.call(this,a)}return a.extend(h,d),UFO.augment(h,{alias:"loginpanel",initComponent:function(){this.el=a.one(g),h.superclass.initComponent.apply(this,arguments)},addCmpEvents:function(){h.superclass.addCmpEvents.apply(this,arguments);var b=this;this.el.delegate("tap click","[action=get_verify_code]:not([disabled])",function(c){var d=b.el.one("input[name=mobile]").val();if(!d)return alert("请输入手机号码！"),!1;if(!d.match(/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/))return alert("手机号码输入格式有误！"),!1;var e=a.one(c.currentTarget);e.attr("disabled","disabled");var g=function(){var a=e.one("[name=countdown]");a.css("display","inline");var b=60;a.html("("+b+"s)");var c=setInterval(function(){a.html("("+--b+"s)"),0===b&&(e.removeAttr("disabled"),a.css("display","none"),clearInterval(c))},1e3)};return g(),f.getVerifyCode({mobile:d},function(){}),!1}),this.el.delegate("click","[action=login]",function(a){var c=e.getRecord(b.el.one(".h_logininput"));f.login(c,function(){b.fire("loginsuc")},function(){b.fire("loginfail")}),console.log("record",c)});var c=this.el.one("[name=verify_code]");c.on("input propertychange",function(a){var d=c.val();d&&6===d.length&&b.el.one("[action=login]").removeAttr("disabled")})}}),h},{requires:["node","xtemplate","UFO/Component","UFO/util/Form","../../action/LoginAction","../tpl/login-tpl"]}),KISSY.add("APP/login/mods/LoginModal",function(a,b,c,d,e){function f(a){f.superclass.constructor.call(this,a)}return a.extend(f,d),a.augment(f,{initComponent:function(){this.loginPanel=new e,this.items=[this.loginPanel],f.superclass.initComponent.apply(this,arguments)},clear:function(){},show:function(){this.clear(),f.superclass.show.apply(this,arguments)},addCmpEvents:function(){f.superclass.addCmpEvents.apply(this,arguments);var a=this;this.el.delegate("click tap",".button-back",function(b){a.hide()}),this.loginPanel.on("loginsuc",function(){a.hide(),a.fire("loginsuc")})}}),f},{requires:["node","xtemplate","UFO/modal/Modal","./LoginPanel"]}),KISSY.add("APP/product/mods/Product",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=!0,q=document,r=new g,s=k.getParam(),t=s.product_id,u=function(b,c){var d=b.one("p"),e=d.height();d.height()>c&&(b.addClass("collapseable collapse"),d.height(c),b.delegate("click tap","a.switch",function(f){var g=a.one(f.currentTarget);g.parent(".switches");return b.hasClass("collapse")?(b.removeClass("collapse"),b.addClass("expand"),d.css("height",e)):b.hasClass("expand")&&(b.removeClass("expand"),b.addClass("collapse"),d.height(c)),!1}))},v=function(c){const d=new IntersectionObserver(function(d){const e=d[0];if(e.isIntersecting){var f=b.create("<div>");c.parentNode.insertBefore(f,c);var g=c.value;b.html(f,g,!0),"section-artisan"==c.getAttribute("name")&&u(a.one(".item-district .detail"),36),b.remove(c)}},{threshold:0});d.observe(c)},w=function(){var b=a.one("#product_pic_slides");b&&new f(b,{autoSlide:!1,effect:"hSlide",animWrapperAutoHeightSetting:!1,colspan:1});var c=a.one("#service_items_slides");c&&c.all(".tab-pannel").length>1&&new f(c,{autoSlide:!1,effect:"hSlide",animWrapperAutoHeightSetting:!1,colspan:2});var d=c.getDOMNode().querySelectorAll(".tab-pannel img");h.loadImages(d);var e=a.one("#material_slides");e&&new f(e,{autoSlide:!1,effect:"hSlide",animWrapperAutoHeightSetting:!1,colspan:1})};return{init:function(){r.show();var b=this;i.query("/v2/product_detail.json",{product_id:t},function(c){if(console.log("product_detail",c),c.ret){c.data.artisan_visit||c.data.customer_visit||(c.data.artisan_visit=!0),k.isApp()&&a.one(q.body).addClass("app"),a.one(q.body).append(new d(l,{commands:{calStarWidth:function(a,b){return 20*Math.round(.5*b.params[0])}}}).render(c.data));var e=a.one(q.body).innerWidth();a.one("#product_pic_slides").height(e),w(),b.data=c.data,a.all("textarea.data-lazyload").each(function(a,b){v(a.getDOMNode())})}else alert(JSON.stringify(c));r.hide()}),this.attachEvents()},setServiceTime:function(b){this.data.service_time=b,a.all("[name=service_time] .item-content").html(b)},attachEvents:function(){var b=a.one(document.body),c=this;b.delegate("click tap","[action=showServiceTimeModal]:not([disabled])",function(b){var d=a.one(b.currentTarget);return d.attr("disabled","disabled"),c.serviceTimeModal?c.serviceTimeModal.show():(c.serviceTimeModal=new m({param:{product_id:c.data.product_id,artisan_id:c.data.artisan.artisan_id}}),c.serviceTimeModal.show(),c.serviceTimeModal.on("hide",function(){d.removeAttr("disabled")}),c.serviceTimeModal.on("ok",function(a){c.setServiceTime(a)})),!1}),b.delegate("click tap","[action=buy_confirm]:not([disabled])",function(b){var d=a.one(b.currentTarget),e=function(){d.removeAttr("disabled")};d.attr("disabled","disabled");var f=function(a){c.buyConfirmModal?(c.buyConfirmModal.show(),c.buyConfirmModal.setServiceTime(c.data.service_time)):(c.buyConfirmModal=new n({animation:"slide-in-up",data:c.data}),c.buyConfirmModal.show(),c.buyConfirmModal.setServiceTime(c.data.service_time),c.buyConfirmModal.on("hide",a))};return!p||k.isLogined()?f(e):a.use("css/login.css",function(a,b){c.loginModal||(c.loginModal=new o({animation:"slide-in-up"}),c.loginModal.on("hide",e),c.loginModal.on("loginsuc",function(){c.loginModal.off("hide",e),f(e),c.loginModal.hide()})),c.loginModal.show()}),!1})}}},{requires:["dom","node","xtemplate","MUI/datalazyload/index","MUI/slider/index","UFO/mask/LoadingMask","APP/util/ImageUtil","../../action/Action","../../util/XTemplateUtil","../../app","../tpl/product-tpl","APP/widget/servicetime/ServiceTimeModal","APP/product/mods/BuyConfirmModal","APP/login/mods/LoginModal"]});