/*! 2024-11-04 */
KISSY.add("UFO/EventSupport",function(a){function b(a,b){for(var c=0,d=b.length;d>c;c++){for(var e=b[c],f=0,g=0;f<a.length;f++)a[f]!=e&&(a[g++]=a[f]);a.length=g}}function c(a){this.listeners=this.listeners||{},this.oneTimeListeners=this.oneTimeListeners||{}}return UFO.augment(c,{on:function(b,c){var d=this.listeners[b]||[];return(d=a.isArray(d)?d:[d]).push(c),this.listeners[b]=d,this},off:function(a,c){return this.listeners[a]&&b(this.listeners[a],c),this.oneTimeListeners[a]&&b(this.oneTimeListeners[a],c),this},one:function(a,b){return this.oneTimeListeners[a]=this.oneTimeListeners[a]||[],this.oneTimeListeners[a].push(b),this},fire:function(){var b=[],c=arguments[0],d=Array.prototype.slice.call(arguments,1),e=this.listeners[c],f=this.oneTimeListeners[c];if(e)for(var g=0,h=(e=a.isArray(e)?e:[e]).length;h>g;g++)b.push(e[g].apply(this,d));if(f)for(g=0,h=(f=a.isArray(f)?f:[f]).length;h>g;g++)b.push(f[g].apply(this,d));return f=[],1==b.length?b[0]:b},fireEvent:function(){return this.fire.apply(this,arguments)},hasListener:function(a){return this.listeners[a]},relayEvents:function(a,b,c){for(var d,e=b.length,f=0;e>f;f++)d=b[f],a.on(d,this.createRelayer(c?c+d:d))},createRelayer:function(a,b){var c=this;return function(){return c.fireEvent.apply(c,[a].concat(Array.prototype.slice.apply(arguments,b||[0])))}}}),c}),KISSY.add("UFO/ComponentQuery",function(a){function b(a,b){return b.method.apply(this,[a].concat(b.args))}function c(a,b){for(var c,d=[],e=0,f=a.length,g=">"!==b;f>e;e++)(c=a[e]).getRefItems&&(d=d.concat(c.getRefItems(g)));return d}function d(a,b,c){if("*"===b)return a.slice();for(var d,e=[],f=0,g=a.length;g>f;f++)(d=a[f])&&d.isType&&d.isType(b,c)&&e.push(d);return e}function e(a,b){for(var c,d=[],e=0,f=a.length;f>e;e++)(c=a[e]).hasCls(b)&&d.push(c);return d}function f(a,b){for(var c,d=[],e=0,f=a.length;f>e;e++)(c=a[e]).getId()===b&&d.push(c);return d}var g=this,h=/^(\s?([>\^])\s?|\s|$)/,i=/^(#)?([\w\-]+|\*)(?:\((true|false)\))?/,j=[{re:/^\.([\w\-]+)(?:\((true|false)\))?/,method:d},{re:/^(?:[\[](?:@)?([\w\-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]])/,method:function(a,b,c,d){for(var e,f=[],g=0,h=a.length;h>g;g++)e=a[g],(d?String(e[b])===d:e[b])&&f.push(e);return f}},{re:/^#([\w\-]+)/,method:f},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:function(a,b,c){return g.pseudos[b](a,c)}}],k=(g.Query=function(a){a=a||{},UFO.apply(this,a)},UFO.augment(g.Query,{execute:function(d){var e,f,g=this.operations,h=0,i=g.length;for(a.isArray(d)&&(f=d);i>h;h++)if(f="^"===(e=g[h]).mode?function(a){for(var b,c=[],d=0,e=a.length;e>d;d++)for(b=a[d];b=b.ownerCt||b.floatParent;)c.push(b);return c}(f||[d]):e.mode?c(f||[d],e.mode):b(f||c([d]),e),h===i-1)return f;return[]},is:function(c){var d,e,f=this.operations,g=a.isArray(c)?c:[c],c=g.length,h=f[f.length-1];if((g=b(g,h)).length!==c)return!1;if(1<f.length)for(e=0,d=g.length;d>e;e++)if(-1===a.indexOf(this.execute(),g[e]))return!1;return!0}}),{cache:{},pseudos:{not:function(a,b){for(var c,d=k,e=0,f=a.length,g=[],h=-1;f>e;++e)c=a[e],d.is(c,b)||(g[++h]=c);return g},first:function(a){var b=[];return 0<a.length&&b.push(a[0]),b},last:function(a){var b=a.length,c=[];return b>0&&c.push(a[b-1]),c}},query:function(b,c){for(var d,e,f,g=b.split(","),h=g.length,i=0,j=[],k=[],l={};h>i;i++)b=a.trim(g[i]),d=this.cache[b]||(this.cache[b]=this.parse(b)),j=j.concat(d.execute(c));if(1<(e=j.length)){for(i=0;e>i;i++)f=j[i],console.log("cmp.id",f.id),l[f.id]||(k.push(f),l[f.id]=!0);j=k}return j},is:function(b,c){if(!c)return!0;for(var d=c.split(","),e=d.length,f=0;e>f;f++)if(c=a.trim(d[f]),(this.cache[c]||(this.cache[c]=this.parse(c))).is(b))return!0;return!1},parse:function(b){for(var c,k,l,m,n,o,p,q=[],r=j.length;b&&c!==b;){for((k=(c=b).match(i))&&(l=k[1],q.push("#"===l?{method:f,args:[a.trim(k[2])]}:"."===l?{method:e,args:[a.trim(k[2])]}:{method:d,args:[a.trim(k[2]),Boolean(k[3])]}),b=b.replace(k[0],""));!(m=b.match(h));)for(o=0;b&&r>o;o++){if(p=j[o],n=b.match(p.re),p.method,n){q.push({method:p.method,args:n.slice(1)}),b=b.replace(n[0],"");break}o===r-1&&console.error('Invalid ComponentQuery selector: "'+arguments[0]+'"')}m[1]&&(q.push({mode:m[2]||m[1]}),b=b.replace(m[0],""))}return new g.Query({operations:q})}});return k}),KISSY.add("UFO/Component",function(a,b,c,d){function e(b){this.config=b||{},a.mix(this,b,!0,void 0,!0),this.id=a.guid(),this.tplId&&(f=this.tpl=a.one("#"+this.tplId).html()),e.superclass.constructor.call(this,b),this.initComponent()}var f="<div></div>";return a.extend(e,c),UFO.augment(e,{alias:"component",initComponent:function(){this.el||(f=this.tpl||f,this.el=a.all(f)),this.bodyStyle=a.mix(this.bodyStyle||{},{padding:this.bodyPadding},!0),this.getBodyContainer().css(this.bodyStyle),this.style=a.mix(this.style||{},{padding:this.padding,margin:this.margin}),this.el.css(this.style),this.cls&&this.addClass(this.cls),this.bodyCls&&this.getBodyContainer().addClass(this.bodyCls),this.attributes&&this.el.attr(this.attributes),this.addCmpEvents()},setSize:function(a,b){this.el.width(a),this.el.height(b)},toEl:function(){return this.el},getEl:function(){return this.toEl()},getTargetEl:function(){},getBodyContainer:function(){return this.el},getContentTarget:function(){return this.el},render:function(b){(b="string"==typeof b?(b=a.one("#"+b))||a.one(b):b).append(this.toEl()),this.fire("afterrender",this)},onAdded:function(a,b){var c=this;c.ownerCt=a,c.fireEvent("added",c,a,b)},css:function(b,c){var d=Array.prototype.slice.call(arguments,0);return 1===d.length&&a.isString(d[0])?el.css(b):this.el.css(b,c),this},removeClass:function(a){return this.el.removeClass(a),this},addClass:function(a){return this.el.addClass(a),this},hasClass:function(a){return this.el.hasClass(a)},hasCls:function(a){return this.hasClass(a)},setDisabled:function(a){(this.disabled=a)?this.el.attr("disabled","disabled"):this.el.attr("disabled","")},show:function(){return!1!==this.fire("beforeshow")&&(this.el.show(),this.fire("show")),this},hide:function(a){var b=this;return!1!==this.fire("beforehide")&&(this.el.hide(),b.destroy&&(b.el.remove(),delete b),b.fire("hide"),a)&&a(),this},getRootContainer:function(){return this.rootContainer},getId:function(){return this.id},up:function(a){var b=this.getBubbleTarget();if(a)for(;b;b=b.getBubbleTarget())if(d.is(b,a))return b;return b},getBubbleTarget:function(){return this.ownerCt},addCmpEvents:function(){},set:function(a,b){this[a]=b},get:function(a){return this[a]},isType:function(a){return UFO.isType(this,a)}}),e},{requires:["node","./EventSupport","./ComponentQuery"]}),KISSY.add("UFO/layout/Layout",function(a){function b(a){this.initLayout()}return UFO.augment(b,{alias:"layout",initLayout:function(){this.el=[]},doLayout:function(b){if(this.clearItems(),!a.isEmptyObject(b))for(var c,d=0,e=b.length;e>d;d++)null!=(c=b[d])&&(this.el.push(c.getEl?c.getEl():c),c.fire)&&c.fire("afterrender",c)},clearItems:function(){this.el=[]},calculate:function(){},toEl:function(){return this.el}}),b}),KISSY.add("UFO/container/Container",function(a,b,c,d,e,f){function g(a){g.superclass.constructor.call(this,a)}var h="<div></div>";return a.extend(g,d),UFO.augment(g,{alias:"container",initComponent:function(){this.el||(h=this.tpl||h,this.el=a.all(h));var b=(b=this.layout)||"layout";this.setLayout(b),this.initItems(),g.superclass.initComponent.apply(this,arguments)},updateLayout:function(){this.layout.doLayout(this.items),this.getBodyContainer().html("");for(var b,c=this.layout.toEl(),d=0,e=(c=a.isArray(c)?c:[c]).length;e>d;d++)b=c[d],this.getBodyContainer().append(b)},initItems:function(){var b;this.items&&(b=this.items,a.isArray(b)||(b=[b]),this.items=[],this.add(b))},add:function(b,c){a.isArray(b)||(b=[b]);var d=this;if(d.items=d.items||[],!a.isEmptyObject(b))for(var e,f=0,g=b.length;g>f;f++)e=b[f],e=UFO.createItem(e,d.defaults),d.items.push(e),e&&e.onAdded&&e.onAdded(d,f),d.fireEvent("add",d,e,f);return a.isEmptyObject(this.items)||this.updateLayout(),d.items},setLayout:function(a){this.layout=UFO.create(a)},getRefItems:function(a){for(var b,c=this,d=c.items,e=d.length,f=0,g=[];e>f;f++)b=d[f],g.push(b),a&&b&&b.getRefItems&&g.push.apply(g,b.getRefItems(!0));return c.floatingItems&&g.push.apply(g,c.floatingItems),g},query:function(a){return f.query(a=a||"*",this)},down:function(a){return this.query(a)[0]||null}}),g},{requires:["node","xtemplate","../Component","../layout/Layout","../ComponentQuery"]}),KISSY.add("UFO/modal/Modal",function(a,b,c,d){function e(a){e.superclass.constructor.call(this,a)}var f=document.body,g=['<div class="modal-backdrop">','	<div class="modal-backdrop-bg"></div>','	<div class="modal"></div>',"</div>"].join("");return a.extend(e,d),UFO.augment(e,{alias:"modal",initComponent:function(){this.el=a.one(g),this.modal=this.el.one(".modal"),this.animation=this.animation||"slide-in-left",this.modal.addClass(this.animation),this.createModal&&(this.items=this.createModal()),e.superclass.initComponent.apply(this,arguments)},getModal:function(){return this.modal},getBodyContainer:function(){return this.modal},show:function(b){var c=this;return this.appended||(a.one(document.body).append(this.toEl()),this.appended=!0),e.superclass.show.apply(this,arguments),"none"!=this.animation&&(setTimeout(function(){c.modal.removeClass("ng-leave"),c.modal.addClass("ng-enter ng-enter-active")},0),setTimeout(function(){b&&b()},400)),this},hide:function(a){function b(){e.superclass.hide.call(c,a)}var c=this;"none"!=this.animation?(this.modal.addClass("ng-leave"),this.modal.removeClass("ng-enter ng-enter-active"),setTimeout(function(){b()},400)):b()},slideIn:function(a){this.show()},slideOut:function(a){this.hide()},addCmpEvents:function(){e.superclass.addCmpEvents.apply(this,arguments);var b=this;this.on("hide",function(){a.one(f).removeClass("modal-open"),a.one(document).one("html").removeClass("modal-open"),f.scrollTop=b.origScrollTop}),this.on("beforeshow",function(){b.origScrollTop=f.scrollTop,a.one(f).addClass("modal-open"),a.one(document).one("html").addClass("modal-open")}),this.el.delegate("click tap",".button-back, .button-close",function(a){return b.hide(),!1})}}),e},{requires:["anim","node","../container/Container"]}),KISSY.add("UFO/scroll/ScrollView",function(a,b,c,d,e){function f(a){this.scrollTop=0,f.superclass.constructor.call(this,a)}var g=['<div class="scroll-content">','    <div class="scroll"></div>','    <div class="scroll-bar scroll-bar-v">','		<div class="scroll-bar-indicator scroll-bar-fade-out" style=""></div>',"	</div>","</div>"].join(""),h=document;return a.extend(f,e),UFO.augment(f,{alias:"scrollview",initComponent:function(){this.el=a.all(g),this.scrollContent=this.el,this.scroll=this.el.one(".scroll"),this.scrollBar=this.el.one(".scroll-bar"),this.scrollIndicator=this.el.one(".scroll-bar-indicator"),this.scrollIndicatorMinSize=50,f.superclass.initComponent.apply(this,arguments)},setScrollIndicatorSizeAndPos:function(){this.scrollIndicatorSize=this.clacScrollIndicatorSize(),this.setScrollIndicatorSize(),this.setScrollIndicatorPosition()},clacScrollIndicatorSize:function(){return parseInt(this.scrollContent.height()/this.scrollContent.getDOMNode().scrollHeight*this.scrollBar.height())},updateLayout:function(){f.superclass.updateLayout.apply(this,arguments),this.setScrollIndicatorSizeAndPos()},setScrollIndicatorSize:function(){this.scrollIndicatorSize>this.scrollIndicatorMinSize?this.scrollIndicatorSize<this.scrollBar.height()?this.scrollIndicator.css({height:this.scrollIndicatorSize+"px",display:"inline-block"}):this.scrollIndicator.hide():(this.scrollIndicatorSize=this.scrollIndicatorMinSize,this.scrollIndicator.css({height:this.scrollIndicatorSize+"px",display:"inline-block"}))},setScrollIndicatorPosition:function(){var a;"none"!=this.scrollIndicator.css("display")&&(a=this.scrollTop/(this.scrollContent.getDOMNode().scrollHeight-this.scrollContent.height())*(this.scrollBar.height()-this.scrollIndicatorSize),this.scrollIndicator.css({"-webkit-transform":"translate3d(0px, "+a+"px, 0px)","-ms-transform":"translate3d(0px, "+a+"px, 0px)","-moz-transform":"translate3d(0px, "+a+"px, 0px)","-o-transform":"translate3d(0px, "+a+"px, 0px)",transform:"translate3d(0px, "+a+"px, 0px)"}))},getBodyContainer:function(){return this.scroll},onScrollContentMouseMove:function(){},scrollBy:function(a){this.setScrollTop(this.calcScrollTop(a))},setScrollTop:function(a){this.scroll.css({"-webkit-transform":"translate3d(0px, "+-a+"px, 0px)","-ms-transform":"translate3d(0px, "+-a+"px, 0px)","-moz-transform":"translate3d(0px, "+-a+"px, 0px)","-o-transform":"translate3d(0px, "+-a+"px, 0px)",transform:"translate3d(0px, "+-a+"px, 0px)"}),this.fire("scroll")},calcScrollTop:function(a){var b=this;return b.scrollTop+=a,b.scrollTop<0&&(b.scrollTop=0),b.scrollTop>b.scrollContent.getDOMNode().scrollHeight-b.scrollContent.height()&&(b.scrollTop=b.scrollContent.getDOMNode().scrollHeight-b.scrollContent.height()),b.scrollTop},addCmpEvents:function(){var a=this;this.on("scroll",function(b){a.setScrollIndicatorPosition()}),this.scrollContent.on("touchstart",function(b){function c(b){a.fire("move");var c=b.touches[0].clientY;return a.scrollBy(e-c),e=c,30<(c=b.timeStamp||Date.now())-f&&(f=c,g=e),!(h=!0)}function d(b){var e,i,j,k,l=b.changedTouches[0].clientY,b=b.timeStamp||Date.now();h=!1,k=.004*(j=0<(e=(g-l)/((i=b)-f))?-1:1),function m(){var b,c;h||(b=Date.now()-i,0<j*(c=e+b*k)?a.fire("moveend"):(a.scrollBy((e+c)/2*b),setTimeout(m,10)))}(),a.scrollContent.detach("touchmove",c),a.scrollContent.detach("touchend",d)}a.fire("movestart"),a.scrollIndicator.removeClass("scroll-bar-fade-out");var e=b.touches[0].clientY,f=b.timeStamp||Date.now(),g=e,h=!1;a.scrollContent.on("touchmove",c),a.scrollContent.on("touchend",d)}),this.scrollContent.on("mousedown",function(b){a.fire("movestart"),a.scrollIndicator.removeClass("scroll-bar-fade-out");var d=b.clientY;c.on(h,"mousemove",function(b){a.fire("move"),b=b.clientY,a.scrollBy(2*(d-b)),d=b}),c.on(h,"mouseup",function(b){a.fire("moveend"),a.scrollIndicator.addClass("scroll-bar-fade-out"),c.detach(h,"mousemove")})}),this.scrollContent.on("mousewheel",function(b){var c,b=b.originalEvent;b.wheelDelta?c=b.wheelDelta/120:b.detail&&(c=-b.detail/3),a.scrollBy(c>0?-80:80)}),this.scroll.on("resize",function(a){console.log("resize====")})}}),f},{requires:["node","event","xtemplate","../container/Container"]}),KISSY.add("APP/widget/serviceaddr/tpl/search-addr-tpl",function(){return' <div class="searchAddrList border-box" style="width:100%; height:100%;">\n    <header class="header bar-love bar">\n	   	<a class="button button-clear back-button icon iconfont icon-back" href="javascript:;"> </a>\n	   	<h1 class="title">\n	   		 服务地址\n	   	</h1>\n    </header>\n    <div class="content has-header">\n    	<label class="item item-input">\n			<i class="icon icon-location placeholder-icon"></i>\n			<input type="text" name="addr_search_input_text" placeholder="输入小区名或大厦名">\n		</label>\n		<!--  \n    	<div class="item item-icon-left addr-search-input-text-wrap padding-top-bottom-8" href="#">\n	      <i class="icon iconfont icon-location" ></i>\n	   	  <input type="text" class="no-border addr-search-input-text" placeholder="输入小区名或大厦名"/>\n	    </div>\n	    -->\n        <div class="scroll-content list" style="height: calc(100% - 94px)">\n        </div>\n    </div>\n</div> '}),KISSY.add("APP/widget/serviceaddr/tpl/search-addr-item-tpl",function(){return'<a class="item item-icon-left padding-top-bottom-8" href="javascript:;" data-index="{{index}}">\n	<h2 class="name">{{title}}</h2>\n	<span class="info">{{address}}</span>\n</a>'}),KISSY.add("APP/widget/serviceaddr/SearchAddrModal",function(a,b,c,d,e,f,g){function h(b){b=a.mix(b||{},{bodyStyle:{"background-color":"#f5f5f5"}}),h.superclass.constructor.call(this,b)}var i,j=new c(g);return a.extend(h,d),a.augment(h,{initComponent:function(){var b=this,c=new BMap.Map,d={onSearchComplete:function(c){if(i.getStatus()==BMAP_STATUS_SUCCESS){var d;b.results=c,b.scrollContent.html("");for(var e=0;e<c.getCurrentNumPois();e++){d=c.getPoi(e);var f=a.one(j.render({title:d.title,address:d.address,index:e}));b.scrollContent.append(f)}}}};i=new BMap.LocalSearch(c,d),h.superclass.initComponent.apply(this,arguments),this.scrollContent=this.el.one(".scroll-content"),this.searchTextField=this.el.one("input[name=addr_search_input_text]")},createModal:function(){return f},clear:function(){this.searchTextField.val(""),this.scrollContent.html("")},show:function(){this.clear(),h.superclass.show.apply(this,arguments)},addCmpEvents:function(){h.superclass.addCmpEvents.apply(this,arguments);var b=this,c=function(a){if(""!=a){var c=(b.city?b.city+" ":"")+a;i.search(c)}};this.el.delegate("click",".back-button",function(a){b.slideOut()}),this.el.delegate("input propertychange","input[name=addr_search_input_text]",a.buffer(function(b){var d=b.currentTarget,e=a.trim(d.value);c(e)},1e3)),this.el.delegate("keyup","input[name=addr_search_input_text]",function(b){if(13===b.keyCode){var d=b.currentTarget,e=a.trim(d.value);c(e)}}),this.el.delegate("click",".list .item",function(c){var d=c.currentTarget,e=a.one(d).attr("data-index");b.fire("itemselected",b.results.getPoi(e)),b.slideOut()})}}),h},{requires:["node","xtemplate","UFO/modal/Modal","UFO/scroll/ScrollView","./tpl/search-addr-tpl","./tpl/search-addr-item-tpl"]});