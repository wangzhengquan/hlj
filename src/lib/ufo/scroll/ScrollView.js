/*! 2024-11-03 */
KISSY.add(function(t,o,l,s,r){var n=['<div class="scroll-content">','    <div class="scroll"></div>','    <div class="scroll-bar scroll-bar-v">','\t\t<div class="scroll-bar-indicator scroll-bar-fade-out" style=""></div>',"\t</div>","</div>"].join(""),i=document;function e(t){this.scrollTop=0,e.superclass.constructor.call(this,t)}return t.extend(e,r),UFO.augment(e,{alias:"scrollview",initComponent:function(){this.el=t.all(n),this.scrollContent=this.el,this.scroll=this.el.one(".scroll"),this.scrollBar=this.el.one(".scroll-bar"),this.scrollIndicator=this.el.one(".scroll-bar-indicator"),this.scrollIndicatorMinSize=50,e.superclass.initComponent.apply(this,arguments)},setScrollIndicatorSizeAndPos:function(){this.scrollIndicatorSize=this.clacScrollIndicatorSize(),this.setScrollIndicatorSize(),this.setScrollIndicatorPosition()},clacScrollIndicatorSize:function(){return parseInt(this.scrollContent.height()/this.scrollContent.getDOMNode().scrollHeight*this.scrollBar.height())},updateLayout:function(){e.superclass.updateLayout.apply(this,arguments),this.setScrollIndicatorSizeAndPos()},setScrollIndicatorSize:function(){this.scrollIndicatorSize>this.scrollIndicatorMinSize?this.scrollIndicatorSize<this.scrollBar.height()?this.scrollIndicator.css({height:this.scrollIndicatorSize+"px",display:"inline-block"}):this.scrollIndicator.hide():(this.scrollIndicatorSize=this.scrollIndicatorMinSize,this.scrollIndicator.css({height:this.scrollIndicatorSize+"px",display:"inline-block"}))},setScrollIndicatorPosition:function(){var t;"none"!=this.scrollIndicator.css("display")&&(t=this.scrollTop/(this.scrollContent.getDOMNode().scrollHeight-this.scrollContent.height())*(this.scrollBar.height()-this.scrollIndicatorSize),this.scrollIndicator.css({"-webkit-transform":"translate3d(0px, "+t+"px, 0px)","-ms-transform":"translate3d(0px, "+t+"px, 0px)","-moz-transform":"translate3d(0px, "+t+"px, 0px)","-o-transform":"translate3d(0px, "+t+"px, 0px)",transform:"translate3d(0px, "+t+"px, 0px)"}))},getBodyContainer:function(){return this.scroll},onScrollContentMouseMove:function(){},scrollBy:function(t){this.setScrollTop(this.calcScrollTop(t))},setScrollTop:function(t){this.scroll.css({"-webkit-transform":"translate3d(0px, "+-t+"px, 0px)","-ms-transform":"translate3d(0px, "+-t+"px, 0px)","-moz-transform":"translate3d(0px, "+-t+"px, 0px)","-o-transform":"translate3d(0px, "+-t+"px, 0px)",transform:"translate3d(0px, "+-t+"px, 0px)"}),this.fire("scroll")},calcScrollTop:function(t){var o=this;return o.scrollTop+=t,o.scrollTop<0&&(o.scrollTop=0),o.scrollTop>o.scrollContent.getDOMNode().scrollHeight-o.scrollContent.height()&&(o.scrollTop=o.scrollContent.getDOMNode().scrollHeight-o.scrollContent.height()),o.scrollTop},addCmpEvents:function(){var d=this;this.on("scroll",function(t){d.setScrollIndicatorPosition()}),this.scrollContent.on("touchstart",function(t){d.fire("movestart"),d.scrollIndicator.removeClass("scroll-bar-fade-out");function l(t){d.fire("move");var o=t.touches[0].clientY;return d.scrollBy(s-o),s=o,30<(o=t.timeStamp||Date.now())-c&&(c=o,a=s),!(h=!0)}function e(t){var s,r,n,i,o=t.changedTouches[0].clientY,t=t.timeStamp||Date.now();h=!1,i=.004*(n=0<(s=(a-o)/((r=t)-c))?-1:1),function t(){var o,l;h||(o=Date.now()-r,0<n*(l=s+o*i)?d.fire("moveend"):(d.scrollBy((s+l)/2*o),setTimeout(t,10)))}(),d.scrollContent.detach("touchmove",l),d.scrollContent.detach("touchend",e)}var s=t.touches[0].clientY,c=t.timeStamp||Date.now(),a=s,h=!1;d.scrollContent.on("touchmove",l),d.scrollContent.on("touchend",e)}),this.scrollContent.on("mousedown",function(t){d.fire("movestart"),d.scrollIndicator.removeClass("scroll-bar-fade-out");var o=t.clientY;l.on(i,"mousemove",function(t){d.fire("move");t=t.clientY;d.scrollBy(2*(o-t)),o=t}),l.on(i,"mouseup",function(t){d.fire("moveend"),d.scrollIndicator.addClass("scroll-bar-fade-out"),l.detach(i,"mousemove")})}),this.scrollContent.on("mousewheel",function(t){var o,t=t.originalEvent;t.wheelDelta?o=t.wheelDelta/120:t.detail&&(o=-t.detail/3),d.scrollBy(0<o?-80:80)}),this.scroll.on("resize",function(t){console.log("resize====")})}}),e},{requires:["node","event","xtemplate","../container/Container"]});