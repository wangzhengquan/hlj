/*! 2024-11-03 */
KISSY.add(function(s,e,t){var o=['<div class="mask-container visible">','\t<div class="masker">',"\t</div>","</div>"].join(""),i=document.body,a=s.one(i);function n(e){n.superclass.constructor.call(this,e)}return s.extend(n,t),UFO.augment(n,{alias:"mask",initComponent:function(){this.el=s.one(o),this.backdrop=s.one('<div class="backdrop visible backdrop-loading active" style="position:absolute;"></div>'),this.maskTarget=this.maskTarget||a,this.setMaskBody(this.createMaskBody()),this.text&&this.setText(this.text),n.superclass.initComponent.apply(this,arguments)},setMaskBody:function(e){this.el.one(".masker").html(""),this.el.one(".masker").append(e)},setText:function(e){this.text=e,this.el.one(".masker span").html(e)},createMaskBody:function(){return"<span></span>"},show:function(){!1!==this.fire("beforeshow")&&(this.maskTarget.append(this.backdrop),this.maskTarget.append(this.el),this.el.addClass("active"))},hide:function(e){var s=this;!1!==this.fire("beforehide")&&(this.el.removeClass("active"),setTimeout(function(){e&&e(),s.backdrop.remove(),s.el.remove(),s.fire("hide"),delete s},200))},addCmpEvents:function(){var e=this;n.superclass.addCmpEvents.apply(this,arguments),a==this.maskTarget&&(this.on("hide",function(){a.removeClass("modal-open"),s.one(document).one("html").removeClass("modal-open"),i.scrollTop=e.origScrollTop}),this.on("beforeshow",function(){e.origScrollTop=i.scrollTop,a.addClass("modal-open"),s.one(document).one("html").addClass("modal-open")}))}}),n},{requires:["node","../Component"]});