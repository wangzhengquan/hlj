/*! 2024-03-19 */
KISSY.add(function(l,t,a,e,n,i,s,o,r,c){document.body;var v=new e(r),b=new e(o);function d(t){t=l.mix(t||{},{defaultTab:0},!1),d.superclass.constructor.call(this,t)}return l.extend(d,i),UFO.augment(d,{alias:"tabpanel",initComponent:function(){this.el=l.one(s),this.tabNav=this.el.one(".tab-nav"),this.tabNavCls&&this.tabNav.addClass(this.tabNavCls),this.navBarContainer=this.el.one(".nav-bar-container"),d.superclass.initComponent.apply(this,arguments),this.init()},init:function(){this.setActiveTab(this.defaultTab)},getBodyContainer:function(){return this.el.one("[name=tab-container]")},add:function(t,a){this.items=this.items||[];for(var e=0,n=t.length;e<n;e++){var i=t[e];this.items.push(i),this.tabNav.append(v.render({name:i.name,title:i.title,iconCls:i.iconCls,iconInCls:i.iconInCls}))}},createTabItem:function(t,a){var e=this.el.one(c),n=(this.getBodyContainer().append(e),UFO.createItem(t)),t=l.one(b.render(n.navBar));if(this.navBarContainer.append(t),l.mix(n,{navBarBlock:t,tabBody:e,loaded:!0}),(this.items[a]=n).navBar&&n.navBar.leftButtons)for(var i=t.one(".buttons-left"),s=0,o=n.navBar.leftButtons.length;s<o;s++)i.append(UFO.createItem(n.navBar.leftButtons[s],{type:"button"}).toEl());if(n.navBar&&n.navBar.rightButtons)for(var r=t.one(".buttons-right"),s=0,o=n.navBar.rightButtons.length;s<o;s++)r.append(UFO.createItem(n.navBar.rightButtons[s],{type:"button"}).toEl());e.one(".scroll-content").append(n.getEl())},setActiveTabStyle:function(t){this.tabNav.all(".tab-item").removeClass("tab-item-active"),this.tabNav.one(".tab-item:nth-child("+(t+1)+")").addClass("tab-item-active");for(var a=0,e=this.items.length;a<e;a++){var n=this.items[a];n.loaded&&(n.navBarBlock.attr("nav-bar","cached"),n.tabBody.attr("nav-view","cached"))}this.items[t].navBarBlock.attr("nav-bar","active"),this.items[t].tabBody.attr("nav-view","active")},setActiveTab:function(t,e){var n,i,s=this;if(l.isString(t))for(var a=0,o=this.items.length;a<o;a++)if(this.items[a].name==t){t=a;break}l.isNumber(t)?(n=t,(i=this.items[n]).loaded?(s.setActiveTabStyle(n),e&&e()):i.path?l.use(i.path,function(t,a){s.createTabItem(i,n),s.setActiveTabStyle(n),e&&e()}):(s.createTabItem(i,n),s.setActiveTabStyle(n),e&&e())):console.error("no tab of the name "+t)},load:function(t,a,e,n){console.log("tabBody",a)},addCmpEvents:function(){d.superclass.addCmpEvents.apply(this,arguments);var o=this;l.one(document.body).delegate("click tap",".tab-item:not([disabled])",function(t){var a=l.one(t.currentTarget),t=a.index();if(!a.hasClass("tab-item-active")){a.attr("disabled","disabled");var e=o.fire("tabclick",t,a),n=!0;if(void 0!==e)for(var i=0,s=(e=l.isArray(e)?e:[e]).length;i<s;i++)if(!1===e[i]){n=!1;break}n&&!a.hasClass("tab-item-active")&&o.setActiveTab(t,function(){a.removeAttr("disabled")})}return!1})}}),d},{requires:["node","event","xtemplate","../button/Button","../container/Container","./tpl/tabpanel-tpl","./tpl/nav-bar-block-tpl","./tpl/tabitem-tpl","./tpl/tab-item-body-tpl"]});