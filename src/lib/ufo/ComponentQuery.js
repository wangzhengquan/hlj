/*! 2024-03-19 */
KISSY.add(function(c){function s(e,r){return r.method.apply(this,[e].concat(r.args))}function u(e,r){for(var t,n=[],o=0,i=e.length,s=">"!==r;o<i;o++)(t=e[o]).getRefItems&&(n=n.concat(t.getRefItems(s)));return n}function f(e,r,t){if("*"===r)return e.slice();for(var n,o=[],i=0,s=e.length;i<s;i++)(n=e[i])&&n.isType&&n.isType(r,t)&&o.push(n);return o}function l(e,r){for(var t,n=[],o=0,i=e.length;o<i;o++)(t=e[o]).hasCls(r)&&n.push(t);return n}function p(e,r){for(var t,n=[],o=0,i=e.length;o<i;o++)(t=e[o]).getId()===r&&n.push(t);return n}var g=this,m=/^(\s?([>\^])\s?|\s|$)/,d=/^(#)?([\w\-]+|\*)(?:\((true|false)\))?/,v=[{re:/^\.([\w\-]+)(?:\((true|false)\))?/,method:f},{re:/^(?:[\[](?:@)?([\w\-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]])/,method:function(e,r,t,n){for(var o,i=[],s=0,u=e.length;s<u;s++)o=e[s],(n?String(o[r])===n:o[r])&&i.push(o);return i}},{re:/^#([\w\-]+)/,method:p},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:function(e,r,t){return g.pseudos[r](e,t)}}],h=(g.Query=function(e){e=e||{},UFO.apply(this,e)},UFO.augment(g.Query,{execute:function(e){var r,t,n=this.operations,o=0,i=n.length;for(c.isArray(e)&&(t=e);o<i;o++)if(t="^"===(r=n[o]).mode?function(e){for(var r,t=[],n=0,o=e.length;n<o;n++)for(r=e[n];r=r.ownerCt||r.floatParent;)t.push(r);return t}(t||[e]):r.mode?u(t||[e],r.mode):s(t||u([e]),r),o===i-1)return t;return[]},is:function(e){var r,t,n=this.operations,o=c.isArray(e)?e:[e],e=o.length,i=n[n.length-1];if((o=s(o,i)).length!==e)return!1;if(1<n.length)for(t=0,r=o.length;t<r;t++)if(-1===c.indexOf(this.execute(),o[t]))return!1;return!0}}),{cache:{},pseudos:{not:function(e,r){for(var t,n=h,o=0,i=e.length,s=[],u=-1;o<i;++o)t=e[o],n.is(t,r)||(s[++u]=t);return s},first:function(e){var r=[];return 0<e.length&&r.push(e[0]),r},last:function(e){var r=e.length,t=[];return 0<r&&t.push(e[r-1]),t}},query:function(e,r){for(var t,n,o,i=e.split(","),s=i.length,u=0,h=[],a=[],f={};u<s;u++)e=c.trim(i[u]),t=this.cache[e]||(this.cache[e]=this.parse(e)),h=h.concat(t.execute(r));if(1<(n=h.length)){for(u=0;u<n;u++)o=h[u],console.log("cmp.id",o.id),f[o.id]||(a.push(o),f[o.id]=!0);h=a}return h},is:function(e,r){if(!r)return!0;for(var t=r.split(","),n=t.length,o=0;o<n;o++)if(r=c.trim(t[o]),(this.cache[r]||(this.cache[r]=this.parse(r))).is(e))return!0;return!1},parse:function(e){for(var r,t,n,o,i,s,u,h=[],a=v.length;e&&r!==e;){for((t=(r=e).match(d))&&(n=t[1],h.push("#"===n?{method:p,args:[c.trim(t[2])]}:"."===n?{method:l,args:[c.trim(t[2])]}:{method:f,args:[c.trim(t[2]),Boolean(t[3])]}),e=e.replace(t[0],""));!(o=e.match(m));)for(s=0;e&&s<a;s++){if(u=v[s],i=e.match(u.re),u.method,i){h.push({method:u.method,args:i.slice(1)}),e=e.replace(i[0],"");break}s===a-1&&console.error('Invalid ComponentQuery selector: "'+arguments[0]+'"')}o[1]&&(h.push({mode:o[2]||o[1]}),e=e.replace(o[0],""))}return new g.Query({operations:h})}});return h});